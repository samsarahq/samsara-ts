// This file was auto-generated by Fern from our API Definition.

import * as Samsara from "../../src/api/index";
import { SamsaraClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("HoursOfServiceClient", () => {
    test("getHosClocks", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: [
                {
                    currentVehicle: {
                        ExternalIds: { maintenanceId: "250020", payrollId: "ABFS18600" },
                        id: "123456789",
                        name: "Midwest Truck #4",
                    },
                    driver: { id: "88668", name: "Susan Bob" },
                    violations: { cycleViolationDurationMs: 39600000, shiftDrivingViolationDurationMs: 39600000 },
                },
            ],
            pagination: { endCursor: "MjkY", hasNextPage: true },
        };
        server.mockEndpoint().get("/fleet/hos/clocks").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.hoursOfService.getHosClocks();
        expect(response).toEqual({
            data: [
                {
                    currentVehicle: {
                        ExternalIds: {
                            maintenanceId: "250020",
                            payrollId: "ABFS18600",
                        },
                        id: "123456789",
                        name: "Midwest Truck #4",
                    },
                    driver: {
                        id: "88668",
                        name: "Susan Bob",
                    },
                    violations: {
                        cycleViolationDurationMs: 39600000,
                        shiftDrivingViolationDurationMs: 39600000,
                    },
                },
            ],
            pagination: {
                endCursor: "MjkY",
                hasNextPage: true,
            },
        });
    });

    test("getHosDailyLogs (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: [
                {
                    distanceTraveled: {
                        driveDistanceMeters: 796625,
                        personalConveyanceDistanceMeters: 27358,
                        yardMoveDistanceMeters: 1287,
                    },
                    driver: { id: "45646", name: "Driver Bob", timezone: "America/Los_Angeles" },
                    dutyStatusDurations: {
                        activeDurationMs: 38825000,
                        driveDurationMs: 31970000,
                        offDutyDurationMs: 20555000,
                        onDutyDurationMs: 5423000,
                        personalConveyanceDurationMs: 4358000,
                        sleeperBerthDurationMs: 27020000,
                        waitingTimeDurationMs: 1560000,
                        yardMoveDurationMs: 1432000,
                    },
                    endTime: "2019-06-20T19:08:25Z",
                    logMetaData: {
                        adverseDrivingClaimed: false,
                        bigDayClaimed: true,
                        carrierFormattedAddress: "1990 Alameda Street, San Francisco, CA 94103",
                        carrierName: "Carrier Name",
                        carrierUsDotNumber: 1234,
                        certifiedAtTime: "2020-01-01T06:00:00Z",
                        homeTerminalFormattedAddress: "1990 Alameda Street, San Francisco, CA 94103",
                        homeTerminalName: "Home Terminal Name",
                        isCertified: false,
                        isUsShortHaulActive: false,
                        shippingDocs: "Delivery 123, chips and soda",
                        trailerNames: ["10293", "Trailer ID 1"],
                    },
                    pendingDutyStatusDurations: {
                        activeDurationMs: 38825000,
                        driveDurationMs: 31970000,
                        offDutyDurationMs: 20555000,
                        onDutyDurationMs: 5423000,
                        personalConveyanceDurationMs: 4358000,
                        sleeperBerthDurationMs: 27020000,
                        waitingTimeDurationMs: 1560000,
                        yardMoveDurationMs: 1432000,
                    },
                    startTime: "2019-06-13T19:08:25Z",
                },
            ],
            pagination: { endCursor: "MjkY", hasNextPage: true },
        };
        server
            .mockEndpoint()
            .get("/fleet/hos/daily-logs")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.hoursOfService.getHosDailyLogs();
        expect(response).toEqual({
            data: [
                {
                    distanceTraveled: {
                        driveDistanceMeters: 796625,
                        personalConveyanceDistanceMeters: 27358,
                        yardMoveDistanceMeters: 1287,
                    },
                    driver: {
                        id: "45646",
                        name: "Driver Bob",
                        timezone: "America/Los_Angeles",
                    },
                    dutyStatusDurations: {
                        activeDurationMs: 38825000,
                        driveDurationMs: 31970000,
                        offDutyDurationMs: 20555000,
                        onDutyDurationMs: 5423000,
                        personalConveyanceDurationMs: 4358000,
                        sleeperBerthDurationMs: 27020000,
                        waitingTimeDurationMs: 1560000,
                        yardMoveDurationMs: 1432000,
                    },
                    endTime: "2019-06-20T19:08:25Z",
                    logMetaData: {
                        adverseDrivingClaimed: false,
                        bigDayClaimed: true,
                        carrierFormattedAddress: "1990 Alameda Street, San Francisco, CA 94103",
                        carrierName: "Carrier Name",
                        carrierUsDotNumber: 1234,
                        certifiedAtTime: "2020-01-01T06:00:00Z",
                        homeTerminalFormattedAddress: "1990 Alameda Street, San Francisco, CA 94103",
                        homeTerminalName: "Home Terminal Name",
                        isCertified: false,
                        isUsShortHaulActive: false,
                        shippingDocs: "Delivery 123, chips and soda",
                        trailerNames: ["10293", "Trailer ID 1"],
                    },
                    pendingDutyStatusDurations: {
                        activeDurationMs: 38825000,
                        driveDurationMs: 31970000,
                        offDutyDurationMs: 20555000,
                        onDutyDurationMs: 5423000,
                        personalConveyanceDurationMs: 4358000,
                        sleeperBerthDurationMs: 27020000,
                        waitingTimeDurationMs: 1560000,
                        yardMoveDurationMs: 1432000,
                    },
                    startTime: "2019-06-13T19:08:25Z",
                },
            ],
            pagination: {
                endCursor: "MjkY",
                hasNextPage: true,
            },
        });
    });

    test("getHosDailyLogs (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fleet/hos/daily-logs")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.hoursOfService.getHosDailyLogs();
        }).rejects.toThrow(Samsara.UnauthorizedError);
    });

    test("getHosDailyLogs (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fleet/hos/daily-logs")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.hoursOfService.getHosDailyLogs();
        }).rejects.toThrow(Samsara.NotFoundError);
    });

    test("getHosDailyLogs (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fleet/hos/daily-logs")
            .respondWith()
            .statusCode(405)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.hoursOfService.getHosDailyLogs();
        }).rejects.toThrow(Samsara.MethodNotAllowedError);
    });

    test("getHosDailyLogs (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fleet/hos/daily-logs")
            .respondWith()
            .statusCode(429)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.hoursOfService.getHosDailyLogs();
        }).rejects.toThrow(Samsara.TooManyRequestsError);
    });

    test("getHosDailyLogs (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fleet/hos/daily-logs")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.hoursOfService.getHosDailyLogs();
        }).rejects.toThrow(Samsara.InternalServerError);
    });

    test("getHosDailyLogs (7)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fleet/hos/daily-logs")
            .respondWith()
            .statusCode(501)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.hoursOfService.getHosDailyLogs();
        }).rejects.toThrow(Samsara.NotImplementedError);
    });

    test("getHosDailyLogs (8)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fleet/hos/daily-logs")
            .respondWith()
            .statusCode(502)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.hoursOfService.getHosDailyLogs();
        }).rejects.toThrow(Samsara.BadGatewayError);
    });

    test("getHosDailyLogs (9)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fleet/hos/daily-logs")
            .respondWith()
            .statusCode(503)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.hoursOfService.getHosDailyLogs();
        }).rejects.toThrow(Samsara.ServiceUnavailableError);
    });

    test("getHosDailyLogs (10)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fleet/hos/daily-logs")
            .respondWith()
            .statusCode(504)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.hoursOfService.getHosDailyLogs();
        }).rejects.toThrow(Samsara.GatewayTimeoutError);
    });

    test("getHosLogs", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: [
                {
                    driver: { id: "88668", name: "Susan Bob" },
                    hosLogs: [
                        {
                            logEndTime: "2020-01-27T07:06:25Z",
                            logRecordedLocation: { latitude: 122.142, longitude: -93.343 },
                            logStartTime: "2020-01-27T07:06:25Z",
                            remark: "Lunch Break",
                        },
                    ],
                },
            ],
            pagination: { endCursor: "MjkY", hasNextPage: true },
        };
        server.mockEndpoint().get("/fleet/hos/logs").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.hoursOfService.getHosLogs();
        expect(response).toEqual({
            data: [
                {
                    driver: {
                        id: "88668",
                        name: "Susan Bob",
                    },
                    hosLogs: [
                        {
                            logEndTime: "2020-01-27T07:06:25Z",
                            logRecordedLocation: {
                                latitude: 122.142,
                                longitude: -93.343,
                            },
                            logStartTime: "2020-01-27T07:06:25Z",
                            remark: "Lunch Break",
                        },
                    ],
                },
            ],
            pagination: {
                endCursor: "MjkY",
                hasNextPage: true,
            },
        });
    });

    test("getHosViolations (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: [
                {
                    violations: [
                        {
                            day: { endTime: "2019-06-14T12:00:00Z", startTime: "2019-06-13T12:00:00Z" },
                            description: "Daily Off-Duty Time (Canada South-10 hours)",
                            driver: { id: "45646", name: "Driver Bob" },
                            durationMs: 31970000,
                            type: "NONE",
                            violationStartTime: "2019-06-13T19:08:25Z",
                        },
                    ],
                },
            ],
            pagination: { endCursor: "MjkY", hasNextPage: true },
        };
        server
            .mockEndpoint()
            .get("/fleet/hos/violations")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.hoursOfService.getHosViolations();
        expect(response).toEqual({
            data: [
                {
                    violations: [
                        {
                            day: {
                                endTime: "2019-06-14T12:00:00Z",
                                startTime: "2019-06-13T12:00:00Z",
                            },
                            description: "Daily Off-Duty Time (Canada South-10 hours)",
                            driver: {
                                id: "45646",
                                name: "Driver Bob",
                            },
                            durationMs: 31970000,
                            type: "NONE",
                            violationStartTime: "2019-06-13T19:08:25Z",
                        },
                    ],
                },
            ],
            pagination: {
                endCursor: "MjkY",
                hasNextPage: true,
            },
        });
    });

    test("getHosViolations (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fleet/hos/violations")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.hoursOfService.getHosViolations();
        }).rejects.toThrow(Samsara.UnauthorizedError);
    });

    test("getHosViolations (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fleet/hos/violations")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.hoursOfService.getHosViolations();
        }).rejects.toThrow(Samsara.NotFoundError);
    });

    test("getHosViolations (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fleet/hos/violations")
            .respondWith()
            .statusCode(405)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.hoursOfService.getHosViolations();
        }).rejects.toThrow(Samsara.MethodNotAllowedError);
    });

    test("getHosViolations (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fleet/hos/violations")
            .respondWith()
            .statusCode(429)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.hoursOfService.getHosViolations();
        }).rejects.toThrow(Samsara.TooManyRequestsError);
    });

    test("getHosViolations (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fleet/hos/violations")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.hoursOfService.getHosViolations();
        }).rejects.toThrow(Samsara.InternalServerError);
    });

    test("getHosViolations (7)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fleet/hos/violations")
            .respondWith()
            .statusCode(501)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.hoursOfService.getHosViolations();
        }).rejects.toThrow(Samsara.NotImplementedError);
    });

    test("getHosViolations (8)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fleet/hos/violations")
            .respondWith()
            .statusCode(502)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.hoursOfService.getHosViolations();
        }).rejects.toThrow(Samsara.BadGatewayError);
    });

    test("getHosViolations (9)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fleet/hos/violations")
            .respondWith()
            .statusCode(503)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.hoursOfService.getHosViolations();
        }).rejects.toThrow(Samsara.ServiceUnavailableError);
    });

    test("getHosViolations (10)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/fleet/hos/violations")
            .respondWith()
            .statusCode(504)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.hoursOfService.getHosViolations();
        }).rejects.toThrow(Samsara.GatewayTimeoutError);
    });

    test("setCurrentDutyStatus", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });
        const rawRequestBody = { duty_status: "ON_DUTY" };

        server
            .mockEndpoint()
            .post("/v1/fleet/drivers/1000000/hos/duty_status")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .build();

        const response = await client.hoursOfService.setCurrentDutyStatus({
            driver_id: 1000000,
            duty_status: "ON_DUTY",
        });
        expect(response).toEqual(undefined);
    });

    test("V1getFleetHosAuthenticationLogs", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            authenticationLogs: [
                {
                    actionType: "signin",
                    address: "THIS FIELD MAY NOT BE POPULATED",
                    addressName: "THIS FIELD MAY NOT BE POPULATED",
                    city: "THIS FIELD MAY NOT BE POPULATED",
                    happenedAtMs: 1462881998034,
                    state: "THIS FIELD MAY NOT BE POPULATED",
                },
            ],
        };
        server
            .mockEndpoint()
            .get("/v1/fleet/hos_authentication_logs")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.hoursOfService.v1GetFleetHosAuthenticationLogs({
            driverId: 1000000,
            startMs: 1000000,
            endMs: 1000000,
        });
        expect(response).toEqual({
            authenticationLogs: [
                {
                    actionType: "signin",
                    address: "THIS FIELD MAY NOT BE POPULATED",
                    addressName: "THIS FIELD MAY NOT BE POPULATED",
                    city: "THIS FIELD MAY NOT BE POPULATED",
                    happenedAtMs: 1462881998034,
                    state: "THIS FIELD MAY NOT BE POPULATED",
                },
            ],
        });
    });
});
