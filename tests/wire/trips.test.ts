// This file was auto-generated by Fern from our API Definition.

import * as Samsara from "../../src/api/index";
import { SamsaraClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("TripsClient", () => {
    test("getTrips (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: [
                {
                    asset: { id: "id", name: "name", type: "uncategorized", vin: "vin" },
                    completionStatus: "inProgress",
                    createdAtTime: "createdAtTime",
                    endLocation: {
                        accuracyMeters: 1.1,
                        address: {
                            city: "city",
                            country: "country",
                            neighborhood: "neighborhood",
                            pointOfInterest: "pointOfInterest",
                            postalCode: "postalCode",
                            state: "state",
                            street: "street",
                            streetNumber: "streetNumber",
                        },
                        geofence: { externalIds: { externalIds: "externalIds" }, id: "id" },
                        headingDegrees: 1000000,
                        latitude: 1.1,
                        longitude: 1.1,
                    },
                    startLocation: {
                        accuracyMeters: 1.1,
                        address: {
                            city: "city",
                            country: "country",
                            neighborhood: "neighborhood",
                            pointOfInterest: "pointOfInterest",
                            postalCode: "postalCode",
                            state: "state",
                            street: "street",
                            streetNumber: "streetNumber",
                        },
                        geofence: { externalIds: { externalIds: "externalIds" }, id: "id" },
                        headingDegrees: 1000000,
                        latitude: 1.1,
                        longitude: 1.1,
                    },
                    tripEndTime: "tripEndTime",
                    tripStartTime: "tripStartTime",
                    updatedAtTime: "updatedAtTime",
                },
                {
                    asset: { id: "id", name: "name", type: "uncategorized", vin: "vin" },
                    completionStatus: "inProgress",
                    createdAtTime: "createdAtTime",
                    endLocation: {
                        accuracyMeters: 1.1,
                        address: {
                            city: "city",
                            country: "country",
                            neighborhood: "neighborhood",
                            pointOfInterest: "pointOfInterest",
                            postalCode: "postalCode",
                            state: "state",
                            street: "street",
                            streetNumber: "streetNumber",
                        },
                        geofence: { externalIds: { externalIds: "externalIds" }, id: "id" },
                        headingDegrees: 1000000,
                        latitude: 1.1,
                        longitude: 1.1,
                    },
                    startLocation: {
                        accuracyMeters: 1.1,
                        address: {
                            city: "city",
                            country: "country",
                            neighborhood: "neighborhood",
                            pointOfInterest: "pointOfInterest",
                            postalCode: "postalCode",
                            state: "state",
                            street: "street",
                            streetNumber: "streetNumber",
                        },
                        geofence: { externalIds: { externalIds: "externalIds" }, id: "id" },
                        headingDegrees: 1000000,
                        latitude: 1.1,
                        longitude: 1.1,
                    },
                    tripEndTime: "tripEndTime",
                    tripStartTime: "tripStartTime",
                    updatedAtTime: "updatedAtTime",
                },
            ],
            pagination: { endCursor: "endCursor", hasNextPage: true },
        };
        server.mockEndpoint().get("/trips/stream").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.trips.getTrips({
            startTime: "startTime",
        });
        expect(response).toEqual({
            data: [
                {
                    asset: {
                        id: "id",
                        name: "name",
                        type: "uncategorized",
                        vin: "vin",
                    },
                    completionStatus: "inProgress",
                    createdAtTime: "createdAtTime",
                    endLocation: {
                        accuracyMeters: 1.1,
                        address: {
                            city: "city",
                            country: "country",
                            neighborhood: "neighborhood",
                            pointOfInterest: "pointOfInterest",
                            postalCode: "postalCode",
                            state: "state",
                            street: "street",
                            streetNumber: "streetNumber",
                        },
                        geofence: {
                            externalIds: {
                                externalIds: "externalIds",
                            },
                            id: "id",
                        },
                        headingDegrees: 1000000,
                        latitude: 1.1,
                        longitude: 1.1,
                    },
                    startLocation: {
                        accuracyMeters: 1.1,
                        address: {
                            city: "city",
                            country: "country",
                            neighborhood: "neighborhood",
                            pointOfInterest: "pointOfInterest",
                            postalCode: "postalCode",
                            state: "state",
                            street: "street",
                            streetNumber: "streetNumber",
                        },
                        geofence: {
                            externalIds: {
                                externalIds: "externalIds",
                            },
                            id: "id",
                        },
                        headingDegrees: 1000000,
                        latitude: 1.1,
                        longitude: 1.1,
                    },
                    tripEndTime: "tripEndTime",
                    tripStartTime: "tripStartTime",
                    updatedAtTime: "updatedAtTime",
                },
                {
                    asset: {
                        id: "id",
                        name: "name",
                        type: "uncategorized",
                        vin: "vin",
                    },
                    completionStatus: "inProgress",
                    createdAtTime: "createdAtTime",
                    endLocation: {
                        accuracyMeters: 1.1,
                        address: {
                            city: "city",
                            country: "country",
                            neighborhood: "neighborhood",
                            pointOfInterest: "pointOfInterest",
                            postalCode: "postalCode",
                            state: "state",
                            street: "street",
                            streetNumber: "streetNumber",
                        },
                        geofence: {
                            externalIds: {
                                externalIds: "externalIds",
                            },
                            id: "id",
                        },
                        headingDegrees: 1000000,
                        latitude: 1.1,
                        longitude: 1.1,
                    },
                    startLocation: {
                        accuracyMeters: 1.1,
                        address: {
                            city: "city",
                            country: "country",
                            neighborhood: "neighborhood",
                            pointOfInterest: "pointOfInterest",
                            postalCode: "postalCode",
                            state: "state",
                            street: "street",
                            streetNumber: "streetNumber",
                        },
                        geofence: {
                            externalIds: {
                                externalIds: "externalIds",
                            },
                            id: "id",
                        },
                        headingDegrees: 1000000,
                        latitude: 1.1,
                        longitude: 1.1,
                    },
                    tripEndTime: "tripEndTime",
                    tripStartTime: "tripStartTime",
                    updatedAtTime: "updatedAtTime",
                },
            ],
            pagination: {
                endCursor: "endCursor",
                hasNextPage: true,
            },
        });
    });

    test("getTrips (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server.mockEndpoint().get("/trips/stream").respondWith().statusCode(401).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.trips.getTrips({
                startTime: "startTime",
            });
        }).rejects.toThrow(Samsara.UnauthorizedError);
    });

    test("getTrips (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server.mockEndpoint().get("/trips/stream").respondWith().statusCode(404).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.trips.getTrips({
                startTime: "startTime",
            });
        }).rejects.toThrow(Samsara.NotFoundError);
    });

    test("getTrips (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server.mockEndpoint().get("/trips/stream").respondWith().statusCode(405).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.trips.getTrips({
                startTime: "startTime",
            });
        }).rejects.toThrow(Samsara.MethodNotAllowedError);
    });

    test("getTrips (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server.mockEndpoint().get("/trips/stream").respondWith().statusCode(429).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.trips.getTrips({
                startTime: "startTime",
            });
        }).rejects.toThrow(Samsara.TooManyRequestsError);
    });

    test("getTrips (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server.mockEndpoint().get("/trips/stream").respondWith().statusCode(500).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.trips.getTrips({
                startTime: "startTime",
            });
        }).rejects.toThrow(Samsara.InternalServerError);
    });

    test("getTrips (7)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server.mockEndpoint().get("/trips/stream").respondWith().statusCode(501).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.trips.getTrips({
                startTime: "startTime",
            });
        }).rejects.toThrow(Samsara.NotImplementedError);
    });

    test("getTrips (8)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server.mockEndpoint().get("/trips/stream").respondWith().statusCode(502).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.trips.getTrips({
                startTime: "startTime",
            });
        }).rejects.toThrow(Samsara.BadGatewayError);
    });

    test("getTrips (9)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server.mockEndpoint().get("/trips/stream").respondWith().statusCode(503).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.trips.getTrips({
                startTime: "startTime",
            });
        }).rejects.toThrow(Samsara.ServiceUnavailableError);
    });

    test("getTrips (10)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = { key: "value" };
        server.mockEndpoint().get("/trips/stream").respondWith().statusCode(504).jsonBody(rawResponseBody).build();

        await expect(async () => {
            return await client.trips.getTrips({
                startTime: "startTime",
            });
        }).rejects.toThrow(Samsara.GatewayTimeoutError);
    });

    test("V1getFleetTrips", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            trips: [
                {
                    assetIds: [122],
                    codriverIds: [122],
                    distanceMeters: 2500,
                    driverId: 719,
                    endAddress: { address: "123 Main St, Sunnyvale, CA 94089", id: 581, name: "Ramen Tatsunoya" },
                    endCoordinates: { latitude: 23.413702345, longitude: -91.502888123 },
                    endLocation: "571 S Lake Ave, Pasadena, CA 91101",
                    endMs: 1462881998034,
                    endOdometer: 210430500,
                    fuelConsumedMl: 75700,
                    startAddress: { address: "123 Main St, Sunnyvale, CA 94089", id: 581, name: "Ramen Tatsunoya" },
                    startCoordinates: { latitude: 29.443702345, longitude: -98.502888123 },
                    startLocation: "16 N Fair Oaks Ave, Pasadena, CA 91103",
                    startMs: 1462878398034,
                    startOdometer: 210430450,
                    tollMeters: 32000,
                },
            ],
        };
        server.mockEndpoint().get("/v1/fleet/trips").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.trips.v1GetFleetTrips({
            vehicleId: 1000000,
            startMs: 1000000,
            endMs: 1000000,
        });
        expect(response).toEqual({
            trips: [
                {
                    assetIds: [122],
                    codriverIds: [122],
                    distanceMeters: 2500,
                    driverId: 719,
                    endAddress: {
                        address: "123 Main St, Sunnyvale, CA 94089",
                        id: 581,
                        name: "Ramen Tatsunoya",
                    },
                    endCoordinates: {
                        latitude: 23.413702345,
                        longitude: -91.502888123,
                    },
                    endLocation: "571 S Lake Ave, Pasadena, CA 91101",
                    endMs: 1462881998034,
                    endOdometer: 210430500,
                    fuelConsumedMl: 75700,
                    startAddress: {
                        address: "123 Main St, Sunnyvale, CA 94089",
                        id: 581,
                        name: "Ramen Tatsunoya",
                    },
                    startCoordinates: {
                        latitude: 29.443702345,
                        longitude: -98.502888123,
                    },
                    startLocation: "16 N Fair Oaks Ave, Pasadena, CA 91103",
                    startMs: 1462878398034,
                    startOdometer: 210430450,
                    tollMeters: 32000,
                },
            ],
        });
    });
});
