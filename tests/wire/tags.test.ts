// This file was auto-generated by Fern from our API Definition.

import { SamsaraClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("TagsClient", () => {
    test("listTags", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: [
                {
                    addresses: [{ id: "23502866574", name: "Driver Don" }],
                    assets: [{ id: "23502866574", name: "Driver Don" }],
                    drivers: [{ id: "23502866574", name: "Driver Don" }],
                    machines: [{ id: "23502866574", name: "Driver Don" }],
                    parentTag: { id: "23502866574", name: "US West Vehicles" },
                    sensors: [{ id: "23502866574", name: "Driver Don" }],
                    vehicles: [{ id: "23502866574", name: "Driver Don" }],
                    id: "342417",
                    name: "California",
                    parentTagId: "4815",
                },
            ],
            pagination: { endCursor: "MjkY", hasNextPage: true },
        };
        server.mockEndpoint().get("/tags").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.tags.listTags();
        expect(response).toEqual({
            data: [
                {
                    addresses: [
                        {
                            id: "23502866574",
                            name: "Driver Don",
                        },
                    ],
                    assets: [
                        {
                            id: "23502866574",
                            name: "Driver Don",
                        },
                    ],
                    drivers: [
                        {
                            id: "23502866574",
                            name: "Driver Don",
                        },
                    ],
                    machines: [
                        {
                            id: "23502866574",
                            name: "Driver Don",
                        },
                    ],
                    parentTag: {
                        id: "23502866574",
                        name: "US West Vehicles",
                    },
                    sensors: [
                        {
                            id: "23502866574",
                            name: "Driver Don",
                        },
                    ],
                    vehicles: [
                        {
                            id: "23502866574",
                            name: "Driver Don",
                        },
                    ],
                    id: "342417",
                    name: "California",
                    parentTagId: "4815",
                },
            ],
            pagination: {
                endCursor: "MjkY",
                hasNextPage: true,
            },
        });
    });

    test("createTag", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });
        const rawRequestBody = { name: "California" };
        const rawResponseBody = {
            data: {
                addresses: [{ id: "23502866574", name: "Driver Don" }],
                assets: [{ id: "23502866574", name: "Driver Don" }],
                drivers: [{ id: "23502866574", name: "Driver Don" }],
                machines: [{ id: "23502866574", name: "Driver Don" }],
                parentTag: { id: "23502866574", name: "US West Vehicles" },
                sensors: [{ id: "23502866574", name: "Driver Don" }],
                vehicles: [{ id: "23502866574", name: "Driver Don" }],
                id: "342417",
                name: "California",
                parentTagId: "4815",
            },
        };
        server
            .mockEndpoint()
            .post("/tags")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.tags.createTag({
            name: "California",
        });
        expect(response).toEqual({
            data: {
                addresses: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                assets: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                drivers: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                machines: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                parentTag: {
                    id: "23502866574",
                    name: "US West Vehicles",
                },
                sensors: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                vehicles: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                id: "342417",
                name: "California",
                parentTagId: "4815",
            },
        });
    });

    test("getTag", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: {
                addresses: [{ id: "23502866574", name: "Driver Don" }],
                assets: [{ id: "23502866574", name: "Driver Don" }],
                drivers: [{ id: "23502866574", name: "Driver Don" }],
                machines: [{ id: "23502866574", name: "Driver Don" }],
                parentTag: { id: "23502866574", name: "US West Vehicles" },
                sensors: [{ id: "23502866574", name: "Driver Don" }],
                vehicles: [{ id: "23502866574", name: "Driver Don" }],
                id: "342417",
                name: "California",
                parentTagId: "4815",
            },
        };
        server.mockEndpoint().get("/tags/id").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.tags.getTag({
            id: "id",
        });
        expect(response).toEqual({
            data: {
                addresses: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                assets: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                drivers: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                machines: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                parentTag: {
                    id: "23502866574",
                    name: "US West Vehicles",
                },
                sensors: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                vehicles: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                id: "342417",
                name: "California",
                parentTagId: "4815",
            },
        });
    });

    test("replaceTag", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });
        const rawRequestBody = {};
        const rawResponseBody = {
            data: {
                addresses: [{ id: "23502866574", name: "Driver Don" }],
                assets: [{ id: "23502866574", name: "Driver Don" }],
                drivers: [{ id: "23502866574", name: "Driver Don" }],
                machines: [{ id: "23502866574", name: "Driver Don" }],
                parentTag: { id: "23502866574", name: "US West Vehicles" },
                sensors: [{ id: "23502866574", name: "Driver Don" }],
                vehicles: [{ id: "23502866574", name: "Driver Don" }],
                id: "342417",
                name: "California",
                parentTagId: "4815",
            },
        };
        server
            .mockEndpoint()
            .put("/tags/id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.tags.replaceTag({
            id: "id",
        });
        expect(response).toEqual({
            data: {
                addresses: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                assets: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                drivers: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                machines: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                parentTag: {
                    id: "23502866574",
                    name: "US West Vehicles",
                },
                sensors: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                vehicles: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                id: "342417",
                name: "California",
                parentTagId: "4815",
            },
        });
    });

    test("delete", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        server.mockEndpoint().delete("/tags/id").respondWith().statusCode(200).build();

        const response = await client.tags.delete({
            id: "id",
        });
        expect(response).toEqual(undefined);
    });

    test("patchTag", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });
        const rawRequestBody = {};
        const rawResponseBody = {
            data: {
                addresses: [{ id: "23502866574", name: "Driver Don" }],
                assets: [{ id: "23502866574", name: "Driver Don" }],
                drivers: [{ id: "23502866574", name: "Driver Don" }],
                machines: [{ id: "23502866574", name: "Driver Don" }],
                parentTag: { id: "23502866574", name: "US West Vehicles" },
                sensors: [{ id: "23502866574", name: "Driver Don" }],
                vehicles: [{ id: "23502866574", name: "Driver Don" }],
                id: "342417",
                name: "California",
                parentTagId: "4815",
            },
        };
        server
            .mockEndpoint()
            .patch("/tags/id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.tags.patchTag({
            id: "id",
        });
        expect(response).toEqual({
            data: {
                addresses: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                assets: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                drivers: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                machines: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                parentTag: {
                    id: "23502866574",
                    name: "US West Vehicles",
                },
                sensors: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                vehicles: [
                    {
                        id: "23502866574",
                        name: "Driver Don",
                    },
                ],
                id: "342417",
                name: "California",
                parentTagId: "4815",
            },
        });
    });
});
