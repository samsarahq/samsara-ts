// This file was auto-generated by Fern from our API Definition.

import { SamsaraClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("EquipmentClient", () => {
    test("listEquipment", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: [
                {
                    assetSerial: "1FUJA6BD31LJ09646",
                    externalIds: { maintenanceId: "250020", payrollId: "ABFS18600" },
                    id: "112",
                    installedGateway: { model: "Ag26" },
                    name: "Crane A7",
                    notes: "These are notes about this given equipment.",
                    tags: [{ id: "3914", name: "East Coast", parentTagId: "4815" }],
                },
            ],
            pagination: { endCursor: "MjkY", hasNextPage: true },
        };
        server.mockEndpoint().get("/fleet/equipment").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.equipment.listEquipment();
        expect(response).toEqual({
            data: [
                {
                    assetSerial: "1FUJA6BD31LJ09646",
                    externalIds: {
                        maintenanceId: "250020",
                        payrollId: "ABFS18600",
                    },
                    id: "112",
                    installedGateway: {
                        model: "Ag26",
                    },
                    name: "Crane A7",
                    notes: "These are notes about this given equipment.",
                    tags: [
                        {
                            id: "3914",
                            name: "East Coast",
                            parentTagId: "4815",
                        },
                    ],
                },
            ],
            pagination: {
                endCursor: "MjkY",
                hasNextPage: true,
            },
        });
    });

    test("getEquipmentLocations", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: [
                {
                    id: "112",
                    location: {
                        heading: 120,
                        latitude: 122.142,
                        longitude: -93.343,
                        speed: 48.3,
                        time: "2020-01-27T07:06:25Z",
                    },
                    name: "Crane A7",
                },
            ],
            pagination: { endCursor: "MjkY", hasNextPage: true },
        };
        server
            .mockEndpoint()
            .get("/fleet/equipment/locations")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.equipment.getEquipmentLocations();
        expect(response).toEqual({
            data: [
                {
                    id: "112",
                    location: {
                        heading: 120,
                        latitude: 122.142,
                        longitude: -93.343,
                        speed: 48.3,
                        time: "2020-01-27T07:06:25Z",
                    },
                    name: "Crane A7",
                },
            ],
            pagination: {
                endCursor: "MjkY",
                hasNextPage: true,
            },
        });
    });

    test("getEquipmentLocationsFeed", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: [
                {
                    id: "112",
                    locations: [
                        {
                            heading: 120,
                            latitude: 122.142,
                            longitude: -93.343,
                            speed: 48.3,
                            time: "2020-01-27T07:06:25Z",
                        },
                    ],
                    name: "Crane A7",
                },
            ],
            pagination: { endCursor: "MjkY", hasNextPage: true },
        };
        server
            .mockEndpoint()
            .get("/fleet/equipment/locations/feed")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.equipment.getEquipmentLocationsFeed();
        expect(response).toEqual({
            data: [
                {
                    id: "112",
                    locations: [
                        {
                            heading: 120,
                            latitude: 122.142,
                            longitude: -93.343,
                            speed: 48.3,
                            time: "2020-01-27T07:06:25Z",
                        },
                    ],
                    name: "Crane A7",
                },
            ],
            pagination: {
                endCursor: "MjkY",
                hasNextPage: true,
            },
        });
    });

    test("getEquipmentLocationsHistory", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: [
                {
                    id: "112",
                    locations: [
                        {
                            heading: 120,
                            latitude: 122.142,
                            longitude: -93.343,
                            speed: 48.3,
                            time: "2020-01-27T07:06:25Z",
                        },
                    ],
                    name: "Crane A7",
                },
            ],
            pagination: { endCursor: "MjkY", hasNextPage: true },
        };
        server
            .mockEndpoint()
            .get("/fleet/equipment/locations/history")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.equipment.getEquipmentLocationsHistory({
            startTime: "startTime",
            endTime: "endTime",
        });
        expect(response).toEqual({
            data: [
                {
                    id: "112",
                    locations: [
                        {
                            heading: 120,
                            latitude: 122.142,
                            longitude: -93.343,
                            speed: 48.3,
                            time: "2020-01-27T07:06:25Z",
                        },
                    ],
                    name: "Crane A7",
                },
            ],
            pagination: {
                endCursor: "MjkY",
                hasNextPage: true,
            },
        });
    });

    test("getEquipmentStats", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: [
                {
                    engineRpm: { time: "time", value: 1000000 },
                    engineSeconds: { time: "time", value: 1000000 },
                    engineState: { time: "time", value: "Off" },
                    engineTotalIdleTimeMinutes: { time: "time", value: 1000000 },
                    fuelPercent: { time: "time", value: 1000000 },
                    gatewayEngineSeconds: { time: "time", value: 1000000 },
                    gatewayEngineState: { time: "time", value: "Off" },
                    gps: {
                        address: { id: "id", name: "name" },
                        headingDegrees: 1.1,
                        latitude: 1.1,
                        longitude: 1.1,
                        reverseGeo: { formattedLocation: "formattedLocation" },
                        speedMilesPerHour: 1.1,
                        time: "time",
                    },
                    gpsOdometerMeters: { time: "time", value: 1000000 },
                    id: "id",
                    name: "name",
                    obdEngineSeconds: { time: "time", value: 1000000 },
                    obdEngineState: { time: "time", value: "Off" },
                },
                {
                    engineRpm: { time: "time", value: 1000000 },
                    engineSeconds: { time: "time", value: 1000000 },
                    engineState: { time: "time", value: "Off" },
                    engineTotalIdleTimeMinutes: { time: "time", value: 1000000 },
                    fuelPercent: { time: "time", value: 1000000 },
                    gatewayEngineSeconds: { time: "time", value: 1000000 },
                    gatewayEngineState: { time: "time", value: "Off" },
                    gps: {
                        address: { id: "id", name: "name" },
                        headingDegrees: 1.1,
                        latitude: 1.1,
                        longitude: 1.1,
                        reverseGeo: { formattedLocation: "formattedLocation" },
                        speedMilesPerHour: 1.1,
                        time: "time",
                    },
                    gpsOdometerMeters: { time: "time", value: 1000000 },
                    id: "id",
                    name: "name",
                    obdEngineSeconds: { time: "time", value: 1000000 },
                    obdEngineState: { time: "time", value: "Off" },
                },
            ],
            pagination: { endCursor: "endCursor", hasNextPage: true },
        };
        server
            .mockEndpoint()
            .get("/fleet/equipment/stats")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.equipment.getEquipmentStats();
        expect(response).toEqual({
            data: [
                {
                    engineRpm: {
                        time: "time",
                        value: 1000000,
                    },
                    engineSeconds: {
                        time: "time",
                        value: 1000000,
                    },
                    engineState: {
                        time: "time",
                        value: "Off",
                    },
                    engineTotalIdleTimeMinutes: {
                        time: "time",
                        value: 1000000,
                    },
                    fuelPercent: {
                        time: "time",
                        value: 1000000,
                    },
                    gatewayEngineSeconds: {
                        time: "time",
                        value: 1000000,
                    },
                    gatewayEngineState: {
                        time: "time",
                        value: "Off",
                    },
                    gps: {
                        address: {
                            id: "id",
                            name: "name",
                        },
                        headingDegrees: 1.1,
                        latitude: 1.1,
                        longitude: 1.1,
                        reverseGeo: {
                            formattedLocation: "formattedLocation",
                        },
                        speedMilesPerHour: 1.1,
                        time: "time",
                    },
                    gpsOdometerMeters: {
                        time: "time",
                        value: 1000000,
                    },
                    id: "id",
                    name: "name",
                    obdEngineSeconds: {
                        time: "time",
                        value: 1000000,
                    },
                    obdEngineState: {
                        time: "time",
                        value: "Off",
                    },
                },
                {
                    engineRpm: {
                        time: "time",
                        value: 1000000,
                    },
                    engineSeconds: {
                        time: "time",
                        value: 1000000,
                    },
                    engineState: {
                        time: "time",
                        value: "Off",
                    },
                    engineTotalIdleTimeMinutes: {
                        time: "time",
                        value: 1000000,
                    },
                    fuelPercent: {
                        time: "time",
                        value: 1000000,
                    },
                    gatewayEngineSeconds: {
                        time: "time",
                        value: 1000000,
                    },
                    gatewayEngineState: {
                        time: "time",
                        value: "Off",
                    },
                    gps: {
                        address: {
                            id: "id",
                            name: "name",
                        },
                        headingDegrees: 1.1,
                        latitude: 1.1,
                        longitude: 1.1,
                        reverseGeo: {
                            formattedLocation: "formattedLocation",
                        },
                        speedMilesPerHour: 1.1,
                        time: "time",
                    },
                    gpsOdometerMeters: {
                        time: "time",
                        value: 1000000,
                    },
                    id: "id",
                    name: "name",
                    obdEngineSeconds: {
                        time: "time",
                        value: 1000000,
                    },
                    obdEngineState: {
                        time: "time",
                        value: "Off",
                    },
                },
            ],
            pagination: {
                endCursor: "endCursor",
                hasNextPage: true,
            },
        });
    });

    test("getEquipmentStatsFeed", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: [
                {
                    engineRpm: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    engineSeconds: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    engineStates: [
                        { time: "time", value: "Off" },
                        { time: "time", value: "Off" },
                    ],
                    engineTotalIdleTimeMinutes: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    fuelPercents: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    gatewayEngineSeconds: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    gatewayEngineStates: [
                        { time: "time", value: "Off" },
                        { time: "time", value: "Off" },
                    ],
                    gatewayJ1939EngineSeconds: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    gps: [
                        {
                            address: { id: "id", name: "name" },
                            headingDegrees: 1.1,
                            latitude: 1.1,
                            longitude: 1.1,
                            reverseGeo: { formattedLocation: "formattedLocation" },
                            speedMilesPerHour: 1.1,
                            time: "time",
                        },
                        {
                            address: { id: "id", name: "name" },
                            headingDegrees: 1.1,
                            latitude: 1.1,
                            longitude: 1.1,
                            reverseGeo: { formattedLocation: "formattedLocation" },
                            speedMilesPerHour: 1.1,
                            time: "time",
                        },
                    ],
                    gpsOdometerMeters: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    id: "id",
                    name: "name",
                    obdEngineSeconds: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    obdEngineStates: [
                        { time: "time", value: "Off" },
                        { time: "time", value: "Off" },
                    ],
                },
                {
                    engineRpm: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    engineSeconds: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    engineStates: [
                        { time: "time", value: "Off" },
                        { time: "time", value: "Off" },
                    ],
                    engineTotalIdleTimeMinutes: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    fuelPercents: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    gatewayEngineSeconds: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    gatewayEngineStates: [
                        { time: "time", value: "Off" },
                        { time: "time", value: "Off" },
                    ],
                    gatewayJ1939EngineSeconds: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    gps: [
                        {
                            address: { id: "id", name: "name" },
                            headingDegrees: 1.1,
                            latitude: 1.1,
                            longitude: 1.1,
                            reverseGeo: { formattedLocation: "formattedLocation" },
                            speedMilesPerHour: 1.1,
                            time: "time",
                        },
                        {
                            address: { id: "id", name: "name" },
                            headingDegrees: 1.1,
                            latitude: 1.1,
                            longitude: 1.1,
                            reverseGeo: { formattedLocation: "formattedLocation" },
                            speedMilesPerHour: 1.1,
                            time: "time",
                        },
                    ],
                    gpsOdometerMeters: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    id: "id",
                    name: "name",
                    obdEngineSeconds: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    obdEngineStates: [
                        { time: "time", value: "Off" },
                        { time: "time", value: "Off" },
                    ],
                },
            ],
            pagination: { endCursor: "endCursor", hasNextPage: true },
        };
        server
            .mockEndpoint()
            .get("/fleet/equipment/stats/feed")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.equipment.getEquipmentStatsFeed();
        expect(response).toEqual({
            data: [
                {
                    engineRpm: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    engineSeconds: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    engineStates: [
                        {
                            time: "time",
                            value: "Off",
                        },
                        {
                            time: "time",
                            value: "Off",
                        },
                    ],
                    engineTotalIdleTimeMinutes: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    fuelPercents: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    gatewayEngineSeconds: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    gatewayEngineStates: [
                        {
                            time: "time",
                            value: "Off",
                        },
                        {
                            time: "time",
                            value: "Off",
                        },
                    ],
                    gatewayJ1939EngineSeconds: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    gps: [
                        {
                            address: {
                                id: "id",
                                name: "name",
                            },
                            headingDegrees: 1.1,
                            latitude: 1.1,
                            longitude: 1.1,
                            reverseGeo: {
                                formattedLocation: "formattedLocation",
                            },
                            speedMilesPerHour: 1.1,
                            time: "time",
                        },
                        {
                            address: {
                                id: "id",
                                name: "name",
                            },
                            headingDegrees: 1.1,
                            latitude: 1.1,
                            longitude: 1.1,
                            reverseGeo: {
                                formattedLocation: "formattedLocation",
                            },
                            speedMilesPerHour: 1.1,
                            time: "time",
                        },
                    ],
                    gpsOdometerMeters: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    id: "id",
                    name: "name",
                    obdEngineSeconds: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    obdEngineStates: [
                        {
                            time: "time",
                            value: "Off",
                        },
                        {
                            time: "time",
                            value: "Off",
                        },
                    ],
                },
                {
                    engineRpm: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    engineSeconds: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    engineStates: [
                        {
                            time: "time",
                            value: "Off",
                        },
                        {
                            time: "time",
                            value: "Off",
                        },
                    ],
                    engineTotalIdleTimeMinutes: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    fuelPercents: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    gatewayEngineSeconds: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    gatewayEngineStates: [
                        {
                            time: "time",
                            value: "Off",
                        },
                        {
                            time: "time",
                            value: "Off",
                        },
                    ],
                    gatewayJ1939EngineSeconds: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    gps: [
                        {
                            address: {
                                id: "id",
                                name: "name",
                            },
                            headingDegrees: 1.1,
                            latitude: 1.1,
                            longitude: 1.1,
                            reverseGeo: {
                                formattedLocation: "formattedLocation",
                            },
                            speedMilesPerHour: 1.1,
                            time: "time",
                        },
                        {
                            address: {
                                id: "id",
                                name: "name",
                            },
                            headingDegrees: 1.1,
                            latitude: 1.1,
                            longitude: 1.1,
                            reverseGeo: {
                                formattedLocation: "formattedLocation",
                            },
                            speedMilesPerHour: 1.1,
                            time: "time",
                        },
                    ],
                    gpsOdometerMeters: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    id: "id",
                    name: "name",
                    obdEngineSeconds: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    obdEngineStates: [
                        {
                            time: "time",
                            value: "Off",
                        },
                        {
                            time: "time",
                            value: "Off",
                        },
                    ],
                },
            ],
            pagination: {
                endCursor: "endCursor",
                hasNextPage: true,
            },
        });
    });

    test("getEquipmentStatsHistory", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: [
                {
                    engineRpm: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    engineSeconds: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    engineStates: [
                        { time: "time", value: "Off" },
                        { time: "time", value: "Off" },
                    ],
                    engineTotalIdleTimeMinutes: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    fuelPercents: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    gatewayEngineSeconds: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    gatewayEngineStates: [
                        { time: "time", value: "Off" },
                        { time: "time", value: "Off" },
                    ],
                    gatewayJ1939EngineSeconds: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    gps: [
                        {
                            address: { id: "id", name: "name" },
                            headingDegrees: 1.1,
                            latitude: 1.1,
                            longitude: 1.1,
                            reverseGeo: { formattedLocation: "formattedLocation" },
                            speedMilesPerHour: 1.1,
                            time: "time",
                        },
                        {
                            address: { id: "id", name: "name" },
                            headingDegrees: 1.1,
                            latitude: 1.1,
                            longitude: 1.1,
                            reverseGeo: { formattedLocation: "formattedLocation" },
                            speedMilesPerHour: 1.1,
                            time: "time",
                        },
                    ],
                    gpsOdometerMeters: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    id: "id",
                    name: "name",
                    obdEngineSeconds: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    obdEngineStates: [
                        { time: "time", value: "Off" },
                        { time: "time", value: "Off" },
                    ],
                },
                {
                    engineRpm: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    engineSeconds: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    engineStates: [
                        { time: "time", value: "Off" },
                        { time: "time", value: "Off" },
                    ],
                    engineTotalIdleTimeMinutes: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    fuelPercents: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    gatewayEngineSeconds: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    gatewayEngineStates: [
                        { time: "time", value: "Off" },
                        { time: "time", value: "Off" },
                    ],
                    gatewayJ1939EngineSeconds: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    gps: [
                        {
                            address: { id: "id", name: "name" },
                            headingDegrees: 1.1,
                            latitude: 1.1,
                            longitude: 1.1,
                            reverseGeo: { formattedLocation: "formattedLocation" },
                            speedMilesPerHour: 1.1,
                            time: "time",
                        },
                        {
                            address: { id: "id", name: "name" },
                            headingDegrees: 1.1,
                            latitude: 1.1,
                            longitude: 1.1,
                            reverseGeo: { formattedLocation: "formattedLocation" },
                            speedMilesPerHour: 1.1,
                            time: "time",
                        },
                    ],
                    gpsOdometerMeters: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    id: "id",
                    name: "name",
                    obdEngineSeconds: [
                        { time: "time", value: 1000000 },
                        { time: "time", value: 1000000 },
                    ],
                    obdEngineStates: [
                        { time: "time", value: "Off" },
                        { time: "time", value: "Off" },
                    ],
                },
            ],
            pagination: { endCursor: "endCursor", hasNextPage: true },
        };
        server
            .mockEndpoint()
            .get("/fleet/equipment/stats/history")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.equipment.getEquipmentStatsHistory({
            startTime: "startTime",
            endTime: "endTime",
        });
        expect(response).toEqual({
            data: [
                {
                    engineRpm: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    engineSeconds: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    engineStates: [
                        {
                            time: "time",
                            value: "Off",
                        },
                        {
                            time: "time",
                            value: "Off",
                        },
                    ],
                    engineTotalIdleTimeMinutes: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    fuelPercents: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    gatewayEngineSeconds: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    gatewayEngineStates: [
                        {
                            time: "time",
                            value: "Off",
                        },
                        {
                            time: "time",
                            value: "Off",
                        },
                    ],
                    gatewayJ1939EngineSeconds: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    gps: [
                        {
                            address: {
                                id: "id",
                                name: "name",
                            },
                            headingDegrees: 1.1,
                            latitude: 1.1,
                            longitude: 1.1,
                            reverseGeo: {
                                formattedLocation: "formattedLocation",
                            },
                            speedMilesPerHour: 1.1,
                            time: "time",
                        },
                        {
                            address: {
                                id: "id",
                                name: "name",
                            },
                            headingDegrees: 1.1,
                            latitude: 1.1,
                            longitude: 1.1,
                            reverseGeo: {
                                formattedLocation: "formattedLocation",
                            },
                            speedMilesPerHour: 1.1,
                            time: "time",
                        },
                    ],
                    gpsOdometerMeters: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    id: "id",
                    name: "name",
                    obdEngineSeconds: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    obdEngineStates: [
                        {
                            time: "time",
                            value: "Off",
                        },
                        {
                            time: "time",
                            value: "Off",
                        },
                    ],
                },
                {
                    engineRpm: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    engineSeconds: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    engineStates: [
                        {
                            time: "time",
                            value: "Off",
                        },
                        {
                            time: "time",
                            value: "Off",
                        },
                    ],
                    engineTotalIdleTimeMinutes: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    fuelPercents: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    gatewayEngineSeconds: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    gatewayEngineStates: [
                        {
                            time: "time",
                            value: "Off",
                        },
                        {
                            time: "time",
                            value: "Off",
                        },
                    ],
                    gatewayJ1939EngineSeconds: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    gps: [
                        {
                            address: {
                                id: "id",
                                name: "name",
                            },
                            headingDegrees: 1.1,
                            latitude: 1.1,
                            longitude: 1.1,
                            reverseGeo: {
                                formattedLocation: "formattedLocation",
                            },
                            speedMilesPerHour: 1.1,
                            time: "time",
                        },
                        {
                            address: {
                                id: "id",
                                name: "name",
                            },
                            headingDegrees: 1.1,
                            latitude: 1.1,
                            longitude: 1.1,
                            reverseGeo: {
                                formattedLocation: "formattedLocation",
                            },
                            speedMilesPerHour: 1.1,
                            time: "time",
                        },
                    ],
                    gpsOdometerMeters: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    id: "id",
                    name: "name",
                    obdEngineSeconds: [
                        {
                            time: "time",
                            value: 1000000,
                        },
                        {
                            time: "time",
                            value: 1000000,
                        },
                    ],
                    obdEngineStates: [
                        {
                            time: "time",
                            value: "Off",
                        },
                        {
                            time: "time",
                            value: "Off",
                        },
                    ],
                },
            ],
            pagination: {
                endCursor: "endCursor",
                hasNextPage: true,
            },
        });
    });

    test("getEquipment", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: {
                assetSerial: "1FUJA6BD31LJ09646",
                externalIds: { maintenanceId: "250020", payrollId: "ABFS18600" },
                id: "112",
                installedGateway: { model: "Ag26", serial: "serial" },
                name: "Crane A7",
                notes: "These are notes about this given equipment.",
                tags: [{ id: "3914", name: "East Coast", parentTagId: "4815" }],
            },
        };
        server
            .mockEndpoint()
            .get("/fleet/equipment/id")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.equipment.getEquipment({
            id: "id",
        });
        expect(response).toEqual({
            data: {
                assetSerial: "1FUJA6BD31LJ09646",
                externalIds: {
                    maintenanceId: "250020",
                    payrollId: "ABFS18600",
                },
                id: "112",
                installedGateway: {
                    model: "Ag26",
                    serial: "serial",
                },
                name: "Crane A7",
                notes: "These are notes about this given equipment.",
                tags: [
                    {
                        id: "3914",
                        name: "East Coast",
                        parentTagId: "4815",
                    },
                ],
            },
        });
    });
});
