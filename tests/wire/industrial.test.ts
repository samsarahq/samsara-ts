// This file was auto-generated by Fern from our API Definition.

import * as Samsara from "../../src/api/index";
import { SamsaraClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("IndustrialClient", () => {
    test("getIndustrialAssets", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: [
                {
                    customMetadata: { manufacturer: "Samsara", serialNumber: "123ABC" },
                    dataOutputs: [
                        {
                            dataGroup: "Control Pressure",
                            deviceId: "123",
                            id: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
                            name: "Digital Output 1",
                        },
                    ],
                    id: "123abcde-4567-8910-1112-fghi1314jklm",
                    isRunning: true,
                    location: {
                        formattedAddress: "350 Rhode Island St, San Francisco CA, 94103",
                        latitude: 37.765363,
                        longitude: -122.403098,
                    },
                    locationDataInput: { id: "id" },
                    locationType: "point",
                    name: "name",
                    parentAsset: { id: "123abcde-4567-8910-1112-fghi1314jklm", name: "name" },
                    runningStatusDataInput: { id: "12345" },
                    tags: [{ id: "3914", name: "East Coast", parentTagId: "4815" }],
                },
            ],
            pagination: { endCursor: "MjkY", hasNextPage: true },
        };
        server.mockEndpoint().get("/industrial/assets").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.industrial.getIndustrialAssets();
        expect(response).toEqual({
            data: [
                {
                    customMetadata: {
                        manufacturer: "Samsara",
                        serialNumber: "123ABC",
                    },
                    dataOutputs: [
                        {
                            dataGroup: "Control Pressure",
                            deviceId: "123",
                            id: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
                            name: "Digital Output 1",
                        },
                    ],
                    id: "123abcde-4567-8910-1112-fghi1314jklm",
                    isRunning: true,
                    location: {
                        formattedAddress: "350 Rhode Island St, San Francisco CA, 94103",
                        latitude: 37.765363,
                        longitude: -122.403098,
                    },
                    locationDataInput: {
                        id: "id",
                    },
                    locationType: "point",
                    name: "name",
                    parentAsset: {
                        id: "123abcde-4567-8910-1112-fghi1314jklm",
                        name: "name",
                    },
                    runningStatusDataInput: {
                        id: "12345",
                    },
                    tags: [
                        {
                            id: "3914",
                            name: "East Coast",
                            parentTagId: "4815",
                        },
                    ],
                },
            ],
            pagination: {
                endCursor: "MjkY",
                hasNextPage: true,
            },
        });
    });

    test("createIndustrialAsset", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });
        const rawRequestBody = { name: "name" };
        const rawResponseBody = {
            data: {
                customMetadata: { manufacturer: "Samsara", serialNumber: "123ABC" },
                dataOutputs: [
                    {
                        dataGroup: "Control Pressure",
                        deviceId: "123",
                        id: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
                        name: "Digital Output 1",
                    },
                ],
                id: "123abcde-4567-8910-1112-fghi1314jklm",
                isRunning: true,
                location: {
                    formattedAddress: "350 Rhode Island St, San Francisco CA, 94103",
                    latitude: 37.765363,
                    longitude: -122.403098,
                },
                locationDataInput: { id: "id" },
                locationType: "point",
                name: "name",
                parentAsset: { id: "123abcde-4567-8910-1112-fghi1314jklm", name: "name" },
                runningStatusDataInput: { id: "12345" },
                tags: [{ id: "3914", name: "East Coast", parentTagId: "4815" }],
            },
        };
        server
            .mockEndpoint()
            .post("/industrial/assets")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.industrial.createIndustrialAsset({
            name: "name",
        });
        expect(response).toEqual({
            data: {
                customMetadata: {
                    manufacturer: "Samsara",
                    serialNumber: "123ABC",
                },
                dataOutputs: [
                    {
                        dataGroup: "Control Pressure",
                        deviceId: "123",
                        id: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
                        name: "Digital Output 1",
                    },
                ],
                id: "123abcde-4567-8910-1112-fghi1314jklm",
                isRunning: true,
                location: {
                    formattedAddress: "350 Rhode Island St, San Francisco CA, 94103",
                    latitude: 37.765363,
                    longitude: -122.403098,
                },
                locationDataInput: {
                    id: "id",
                },
                locationType: "point",
                name: "name",
                parentAsset: {
                    id: "123abcde-4567-8910-1112-fghi1314jklm",
                    name: "name",
                },
                runningStatusDataInput: {
                    id: "12345",
                },
                tags: [
                    {
                        id: "3914",
                        name: "East Coast",
                        parentTagId: "4815",
                    },
                ],
            },
        });
    });

    test("patchIndustrialAsset", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });
        const rawRequestBody = {};
        const rawResponseBody = {
            data: {
                customMetadata: { manufacturer: "Samsara", serialNumber: "123ABC" },
                dataOutputs: [
                    {
                        dataGroup: "Control Pressure",
                        deviceId: "123",
                        id: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
                        name: "Digital Output 1",
                    },
                ],
                id: "123abcde-4567-8910-1112-fghi1314jklm",
                isRunning: true,
                location: {
                    formattedAddress: "350 Rhode Island St, San Francisco CA, 94103",
                    latitude: 37.765363,
                    longitude: -122.403098,
                },
                locationDataInput: { id: "id" },
                locationType: "point",
                name: "name",
                parentAsset: { id: "123abcde-4567-8910-1112-fghi1314jklm", name: "name" },
                runningStatusDataInput: { id: "12345" },
                tags: [{ id: "3914", name: "East Coast", parentTagId: "4815" }],
            },
        };
        server
            .mockEndpoint()
            .patch("/industrial/assets/id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.industrial.patchIndustrialAsset({
            id: "id",
        });
        expect(response).toEqual({
            data: {
                customMetadata: {
                    manufacturer: "Samsara",
                    serialNumber: "123ABC",
                },
                dataOutputs: [
                    {
                        dataGroup: "Control Pressure",
                        deviceId: "123",
                        id: "3fa85f64-5717-4562-b3fc-2c963f66afa6",
                        name: "Digital Output 1",
                    },
                ],
                id: "123abcde-4567-8910-1112-fghi1314jklm",
                isRunning: true,
                location: {
                    formattedAddress: "350 Rhode Island St, San Francisco CA, 94103",
                    latitude: 37.765363,
                    longitude: -122.403098,
                },
                locationDataInput: {
                    id: "id",
                },
                locationType: "point",
                name: "name",
                parentAsset: {
                    id: "123abcde-4567-8910-1112-fghi1314jklm",
                    name: "name",
                },
                runningStatusDataInput: {
                    id: "12345",
                },
                tags: [
                    {
                        id: "3914",
                        name: "East Coast",
                        parentTagId: "4815",
                    },
                ],
            },
        });
    });

    test("patchAssetDataOutputs (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });
        const rawRequestBody = { values: { key: "value" } };
        const rawResponseBody = {
            data: [
                {
                    errorMessage: "Failed to write to Device: GFRV-43N-VGX",
                    id: "8a9371af-82d1-4158-bf91-4ecc8d3a114c",
                    statusCode: 200,
                },
            ],
        };
        server
            .mockEndpoint()
            .patch("/industrial/assets/id/data-outputs")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.industrial.patchAssetDataOutputs({
            id: "id",
            values: {
                key: "value",
            },
        });
        expect(response).toEqual({
            data: [
                {
                    errorMessage: "Failed to write to Device: GFRV-43N-VGX",
                    id: "8a9371af-82d1-4158-bf91-4ecc8d3a114c",
                    statusCode: 200,
                },
            ],
        });
    });

    test("patchAssetDataOutputs (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });
        const rawRequestBody = { values: { values: { key: "value" } } };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/industrial/assets/id/data-outputs")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.industrial.patchAssetDataOutputs({
                id: "id",
                values: {
                    values: {
                        key: "value",
                    },
                },
            });
        }).rejects.toThrow(Samsara.UnauthorizedError);
    });

    test("patchAssetDataOutputs (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });
        const rawRequestBody = { values: { values: { key: "value" } } };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/industrial/assets/id/data-outputs")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.industrial.patchAssetDataOutputs({
                id: "id",
                values: {
                    values: {
                        key: "value",
                    },
                },
            });
        }).rejects.toThrow(Samsara.NotFoundError);
    });

    test("patchAssetDataOutputs (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });
        const rawRequestBody = { values: { values: { key: "value" } } };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/industrial/assets/id/data-outputs")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(405)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.industrial.patchAssetDataOutputs({
                id: "id",
                values: {
                    values: {
                        key: "value",
                    },
                },
            });
        }).rejects.toThrow(Samsara.MethodNotAllowedError);
    });

    test("patchAssetDataOutputs (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });
        const rawRequestBody = { values: { values: { key: "value" } } };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/industrial/assets/id/data-outputs")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(429)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.industrial.patchAssetDataOutputs({
                id: "id",
                values: {
                    values: {
                        key: "value",
                    },
                },
            });
        }).rejects.toThrow(Samsara.TooManyRequestsError);
    });

    test("patchAssetDataOutputs (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });
        const rawRequestBody = { values: { values: { key: "value" } } };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/industrial/assets/id/data-outputs")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.industrial.patchAssetDataOutputs({
                id: "id",
                values: {
                    values: {
                        key: "value",
                    },
                },
            });
        }).rejects.toThrow(Samsara.InternalServerError);
    });

    test("patchAssetDataOutputs (7)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });
        const rawRequestBody = { values: { values: { key: "value" } } };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/industrial/assets/id/data-outputs")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(501)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.industrial.patchAssetDataOutputs({
                id: "id",
                values: {
                    values: {
                        key: "value",
                    },
                },
            });
        }).rejects.toThrow(Samsara.NotImplementedError);
    });

    test("patchAssetDataOutputs (8)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });
        const rawRequestBody = { values: { values: { key: "value" } } };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/industrial/assets/id/data-outputs")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(502)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.industrial.patchAssetDataOutputs({
                id: "id",
                values: {
                    values: {
                        key: "value",
                    },
                },
            });
        }).rejects.toThrow(Samsara.BadGatewayError);
    });

    test("patchAssetDataOutputs (9)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });
        const rawRequestBody = { values: { values: { key: "value" } } };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/industrial/assets/id/data-outputs")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(503)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.industrial.patchAssetDataOutputs({
                id: "id",
                values: {
                    values: {
                        key: "value",
                    },
                },
            });
        }).rejects.toThrow(Samsara.ServiceUnavailableError);
    });

    test("patchAssetDataOutputs (10)", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });
        const rawRequestBody = { values: { values: { key: "value" } } };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .patch("/industrial/assets/id/data-outputs")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(504)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.industrial.patchAssetDataOutputs({
                id: "id",
                values: {
                    values: {
                        key: "value",
                    },
                },
            });
        }).rejects.toThrow(Samsara.GatewayTimeoutError);
    });

    test("getDataInputs", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: [
                {
                    assetId: "74771078-5edb-4733-88f2-7242f520d1f1",
                    dataGroup: "Flow",
                    id: "id",
                    name: "Pump Flow",
                    units: "Gallons Per Minute",
                },
            ],
            pagination: { endCursor: "MjkY", hasNextPage: true },
        };
        server
            .mockEndpoint()
            .get("/industrial/data-inputs")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.industrial.getDataInputs();
        expect(response).toEqual({
            data: [
                {
                    assetId: "74771078-5edb-4733-88f2-7242f520d1f1",
                    dataGroup: "Flow",
                    id: "id",
                    name: "Pump Flow",
                    units: "Gallons Per Minute",
                },
            ],
            pagination: {
                endCursor: "MjkY",
                hasNextPage: true,
            },
        });
    });

    test("getDataInputDataSnapshot", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: [
                {
                    fftSpectraPoint: { time: "2020-01-27T07:06:25Z" },
                    j1939D1StatusPoint: { time: "2020-01-27T07:06:25Z" },
                    locationPoint: { time: "2020-01-27T07:06:25Z" },
                    numberPoint: { time: "2020-01-27T07:06:25Z", value: 1992.0506 },
                    stringPoint: { time: "2020-01-27T07:06:25Z", value: "On" },
                    assetId: "74771078-5edb-4733-88f2-7242f520d1f1",
                    dataGroup: "Flow",
                    id: "id",
                    name: "Pump Flow",
                    units: "Gallons Per Minute",
                },
            ],
            pagination: { endCursor: "MjkY", hasNextPage: true },
        };
        server
            .mockEndpoint()
            .get("/industrial/data-inputs/data-points")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.industrial.getDataInputDataSnapshot();
        expect(response).toEqual({
            data: [
                {
                    fftSpectraPoint: {
                        time: "2020-01-27T07:06:25Z",
                    },
                    j1939D1StatusPoint: {
                        time: "2020-01-27T07:06:25Z",
                    },
                    locationPoint: {
                        time: "2020-01-27T07:06:25Z",
                    },
                    numberPoint: {
                        time: "2020-01-27T07:06:25Z",
                        value: 1992.0506,
                    },
                    stringPoint: {
                        time: "2020-01-27T07:06:25Z",
                        value: "On",
                    },
                    assetId: "74771078-5edb-4733-88f2-7242f520d1f1",
                    dataGroup: "Flow",
                    id: "id",
                    name: "Pump Flow",
                    units: "Gallons Per Minute",
                },
            ],
            pagination: {
                endCursor: "MjkY",
                hasNextPage: true,
            },
        });
    });

    test("getDataInputDataFeed", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: [
                {
                    fftSpectraPoints: [{ time: "2020-01-27T07:06:25Z" }],
                    j1939D1StatusPoints: [{ time: "2020-01-27T07:06:25Z" }],
                    locationPoints: [{ time: "2020-01-27T07:06:25Z" }],
                    numberPoints: [{ time: "2020-01-27T07:06:25Z", value: 1992.0506 }],
                    stringPoints: [{ time: "2020-01-27T07:06:25Z", value: "On" }],
                    assetId: "74771078-5edb-4733-88f2-7242f520d1f1",
                    dataGroup: "Flow",
                    id: "id",
                    name: "Pump Flow",
                    units: "Gallons Per Minute",
                },
            ],
            pagination: { endCursor: "MjkY", hasNextPage: true },
        };
        server
            .mockEndpoint()
            .get("/industrial/data-inputs/data-points/feed")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.industrial.getDataInputDataFeed();
        expect(response).toEqual({
            data: [
                {
                    fftSpectraPoints: [
                        {
                            time: "2020-01-27T07:06:25Z",
                        },
                    ],
                    j1939D1StatusPoints: [
                        {
                            time: "2020-01-27T07:06:25Z",
                        },
                    ],
                    locationPoints: [
                        {
                            time: "2020-01-27T07:06:25Z",
                        },
                    ],
                    numberPoints: [
                        {
                            time: "2020-01-27T07:06:25Z",
                            value: 1992.0506,
                        },
                    ],
                    stringPoints: [
                        {
                            time: "2020-01-27T07:06:25Z",
                            value: "On",
                        },
                    ],
                    assetId: "74771078-5edb-4733-88f2-7242f520d1f1",
                    dataGroup: "Flow",
                    id: "id",
                    name: "Pump Flow",
                    units: "Gallons Per Minute",
                },
            ],
            pagination: {
                endCursor: "MjkY",
                hasNextPage: true,
            },
        });
    });

    test("getDataInputDataHistory", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            data: [
                {
                    fftSpectraPoints: [{ time: "2020-01-27T07:06:25Z" }],
                    j1939D1StatusPoints: [{ time: "2020-01-27T07:06:25Z" }],
                    locationPoints: [{ time: "2020-01-27T07:06:25Z" }],
                    numberPoints: [{ time: "2020-01-27T07:06:25Z", value: 1992.0506 }],
                    stringPoints: [{ time: "2020-01-27T07:06:25Z", value: "On" }],
                    assetId: "74771078-5edb-4733-88f2-7242f520d1f1",
                    dataGroup: "Flow",
                    id: "id",
                    name: "Pump Flow",
                    units: "Gallons Per Minute",
                },
            ],
            pagination: { endCursor: "MjkY", hasNextPage: true },
        };
        server
            .mockEndpoint()
            .get("/industrial/data-inputs/data-points/history")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.industrial.getDataInputDataHistory({
            startTime: "startTime",
            endTime: "endTime",
        });
        expect(response).toEqual({
            data: [
                {
                    fftSpectraPoints: [
                        {
                            time: "2020-01-27T07:06:25Z",
                        },
                    ],
                    j1939D1StatusPoints: [
                        {
                            time: "2020-01-27T07:06:25Z",
                        },
                    ],
                    locationPoints: [
                        {
                            time: "2020-01-27T07:06:25Z",
                        },
                    ],
                    numberPoints: [
                        {
                            time: "2020-01-27T07:06:25Z",
                            value: 1992.0506,
                        },
                    ],
                    stringPoints: [
                        {
                            time: "2020-01-27T07:06:25Z",
                            value: "On",
                        },
                    ],
                    assetId: "74771078-5edb-4733-88f2-7242f520d1f1",
                    dataGroup: "Flow",
                    id: "id",
                    name: "Pump Flow",
                    units: "Gallons Per Minute",
                },
            ],
            pagination: {
                endCursor: "MjkY",
                hasNextPage: true,
            },
        });
    });

    test("V1getCameras", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = [
            { cameraId: 1234512345999, cameraName: "Line 32", ethernetIp: "10.1.2.34", wifiIp: "10.1.2.35" },
        ];
        server
            .mockEndpoint()
            .get("/v1/industrial/vision/cameras")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.industrial.v1GetCameras();
        expect(response).toEqual([
            {
                cameraId: 1234512345999,
                cameraName: "Line 32",
                ethernetIp: "10.1.2.34",
                wifiIp: "10.1.2.35",
            },
        ]);
    });

    test("V1getVisionProgramsByCamera", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = [{ programId: 1, programName: "Barcode verification program" }];
        server
            .mockEndpoint()
            .get("/v1/industrial/vision/cameras/1000000/programs")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.industrial.v1GetVisionProgramsByCamera({
            camera_id: 1000000,
        });
        expect(response).toEqual([
            {
                programId: 1,
                programName: "Barcode verification program",
            },
        ]);
    });

    test("V1getVisionLatestRunCamera", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            cameraId: 1234512345123,
            endedAtMs: 0,
            inspectionResults: [
                {
                    captureAtMs: 1553811994730,
                    result: "PASS",
                    stepResults: [{ name: "Chicken Caesar Label", result: "PASS" }],
                },
            ],
            isOngoing: true,
            program: { id: 1, name: "Barcode verification program" },
            runSummary: { itemsPerMinute: 0.1, noReadCount: 0, rejectCount: 0, successCount: 181 },
            startedAtMs: 1553808606097,
        };
        server
            .mockEndpoint()
            .get("/v1/industrial/vision/run/camera/1000000")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.industrial.v1GetVisionLatestRunCamera({
            camera_id: 1000000,
        });
        expect(response).toEqual({
            cameraId: 1234512345123,
            endedAtMs: 0,
            inspectionResults: [
                {
                    captureAtMs: 1553811994730,
                    result: "PASS",
                    stepResults: [
                        {
                            name: "Chicken Caesar Label",
                            result: "PASS",
                        },
                    ],
                },
            ],
            isOngoing: true,
            program: {
                id: 1,
                name: "Barcode verification program",
            },
            runSummary: {
                itemsPerMinute: 0.1,
                noReadCount: 0,
                rejectCount: 0,
                successCount: 181,
            },
            startedAtMs: 1553808606097,
        });
    });

    test("V1getVisionRuns", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            visionRuns: [
                {
                    deviceId: 1234512345123,
                    endedAtMs: 0,
                    programId: 1,
                    reportMetadata: { itemsPerMinute: 0.1, noReadCount: 181, rejectCount: 0, successCount: 181 },
                    startedAtMs: 1553808606097,
                },
            ],
        };
        server
            .mockEndpoint()
            .get("/v1/industrial/vision/runs")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.industrial.v1GetVisionRuns({
            durationMs: 1000000,
        });
        expect(response).toEqual({
            visionRuns: [
                {
                    deviceId: 1234512345123,
                    endedAtMs: 0,
                    programId: 1,
                    reportMetadata: {
                        itemsPerMinute: 0.1,
                        noReadCount: 181,
                        rejectCount: 0,
                        successCount: 181,
                    },
                    startedAtMs: 1553808606097,
                },
            ],
        });
    });

    test("getVisionRunsByCamera", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = [
            {
                deviceId: 1234512345123,
                endedAtMs: 0,
                program: { id: 1, name: "Barcode verification program" },
                reportMetadata: { itemsPerMinute: 0.1, noReadCount: 0, rejectCount: 0, successCount: 181 },
                startedAtMs: 1553808606097,
            },
        ];
        server
            .mockEndpoint()
            .get("/v1/industrial/vision/runs/1000000")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.industrial.getVisionRunsByCamera({
            camera_id: 1000000,
            durationMs: 1000000,
        });
        expect(response).toEqual([
            {
                deviceId: 1234512345123,
                endedAtMs: 0,
                program: {
                    id: 1,
                    name: "Barcode verification program",
                },
                reportMetadata: {
                    itemsPerMinute: 0.1,
                    noReadCount: 0,
                    rejectCount: 0,
                    successCount: 181,
                },
                startedAtMs: 1553808606097,
            },
        ]);
    });

    test("V1getVisionRunsByCameraAndProgram", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            deviceId: 1234512345123,
            endedAtMs: 0,
            programId: 1,
            reportMetadata: { itemsPerMinute: 0.1, noReadCount: 0, rejectCount: 0, successCount: 181 },
            results: [
                {
                    captureAtMs: 1553811994730,
                    result: "PASS",
                    stepResults: [{ name: "Chicken Caesar Label", result: "PASS" }],
                },
            ],
            startedAtMs: 1553808606097,
        };
        server
            .mockEndpoint()
            .get("/v1/industrial/vision/runs/1000000/1000000/1000000")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.industrial.v1GetVisionRunsByCameraAndProgram({
            camera_id: 1000000,
            program_id: 1000000,
            started_at_ms: 1000000,
        });
        expect(response).toEqual({
            deviceId: 1234512345123,
            endedAtMs: 0,
            programId: 1,
            reportMetadata: {
                itemsPerMinute: 0.1,
                noReadCount: 0,
                rejectCount: 0,
                successCount: 181,
            },
            results: [
                {
                    captureAtMs: 1553811994730,
                    result: "PASS",
                    stepResults: [
                        {
                            name: "Chicken Caesar Label",
                            result: "PASS",
                        },
                    ],
                },
            ],
            startedAtMs: 1553808606097,
        });
    });

    test("V1getMachinesHistory", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });
        const rawRequestBody = { endMs: 1462881998034, startMs: 1462878398034 };
        const rawResponseBody = {
            machines: [
                { id: 1, name: "1/3 HP Motor", vibrations: [{ X: 0.01, Y: 1.23, Z: 2.55, time: 1453449599999 }] },
            ],
        };
        server
            .mockEndpoint()
            .post("/v1/machines/history")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.industrial.v1GetMachinesHistory({
            endMs: 1462881998034,
            startMs: 1462878398034,
        });
        expect(response).toEqual({
            machines: [
                {
                    id: 1,
                    name: "1/3 HP Motor",
                    vibrations: [
                        {
                            X: 0.01,
                            Y: 1.23,
                            Z: 2.55,
                            time: 1453449599999,
                        },
                    ],
                },
            ],
        });
    });

    test("V1getMachines", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            machines: [{ id: 123, name: "Freezer ABC", notes: "This is in the left hallway behind the conveyor belt" }],
        };
        server.mockEndpoint().post("/v1/machines/list").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.industrial.v1GetMachines();
        expect(response).toEqual({
            machines: [
                {
                    id: 123,
                    name: "Freezer ABC",
                    notes: "This is in the left hallway behind the conveyor belt",
                },
            ],
        });
    });
});
