// This file was auto-generated by Fern from our API Definition.

import { SamsaraClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("TrailerAssignmentsClient", () => {
    test("V1getAllTrailerAssignments", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            pagination: {
                endCursor: "MTU5MTEzNjA2OTU0MzQ3",
                hasNextPage: true,
                hasPrevPage: true,
                startCursor: "MTU5MTEzNjA2OTU0MzQ3",
            },
            trailers: [
                {
                    trailerAssignments: [{ driverId: 2047, endMs: 1462881998034, startMs: 1462878398034 }],
                    id: 2041,
                    name: "myTrailer",
                },
            ],
        };
        server
            .mockEndpoint()
            .get("/v1/fleet/trailers/assignments")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.trailerAssignments.v1GetAllTrailerAssignments();
        expect(response).toEqual({
            pagination: {
                endCursor: "MTU5MTEzNjA2OTU0MzQ3",
                hasNextPage: true,
                hasPrevPage: true,
                startCursor: "MTU5MTEzNjA2OTU0MzQ3",
            },
            trailers: [
                {
                    trailerAssignments: [
                        {
                            driverId: 2047,
                            endMs: 1462881998034,
                            startMs: 1462878398034,
                        },
                    ],
                    id: 2041,
                    name: "myTrailer",
                },
            ],
        });
    });

    test("V1getFleetTrailerAssignments", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraClient({
            maxRetries: 0,
            token: "test",
            version: "2025-06-11",
            environment: server.baseUrl,
        });

        const rawResponseBody = {
            trailerAssignments: [{ driverId: 2047, endMs: 1462881998034, startMs: 1462878398034 }],
            id: 2041,
            name: "myTrailer",
        };
        server
            .mockEndpoint()
            .get("/v1/fleet/trailers/1000000/assignments")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.trailerAssignments.v1GetFleetTrailerAssignments(1000000);
        expect(response).toEqual({
            trailerAssignments: [
                {
                    driverId: 2047,
                    endMs: 1462881998034,
                    startMs: 1462878398034,
                },
            ],
            id: 2041,
            name: "myTrailer",
        });
    });
});
