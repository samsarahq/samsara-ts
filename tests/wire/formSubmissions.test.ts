/**
 * This file was auto-generated by Fern from our API Definition.
 */

import { mockServerPool } from "../mock-server/MockServerPool.js";
import { SamsaraApiClient } from "../../src/Client";

describe("FormSubmissions", () => {
    test("list", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraApiClient({ token: "test", version: "2025-05-12", environment: server.baseUrl });

        const rawResponseBody = {
            data: [
                {
                    approvalDetails: { comment: "comment" },
                    asset: {
                        entryType: "tracked",
                        externalIds: { externalIds: "externalIds" },
                        id: "id",
                        name: "name",
                    },
                    assignedAtTime: "2024-01-15T09:30:00Z",
                    assignedTo: { id: "id", type: "driver" },
                    createdAtTime: "2024-01-15T09:30:00Z",
                    dueAtTime: "2024-01-15T09:30:00Z",
                    externalIds: { externalIds: "externalIds" },
                    fields: [
                        {
                            assetValue: {
                                asset: {
                                    entryType: "tracked",
                                    externalIds: { externalIds: "externalIds" },
                                    id: "id",
                                    name: "name",
                                },
                            },
                            checkBoxesValue: { value: ["value", "value"], valueIds: ["valueIds", "valueIds"] },
                            dateTimeValue: { type: "datetime", value: "2024-01-15T09:30:00Z" },
                            geofenceValue: {
                                geofence: {
                                    address: "address",
                                    entryType: "tracked",
                                    externalIds: { externalIds: "externalIds" },
                                    id: "id",
                                    name: "name",
                                },
                            },
                            id: "id",
                            issue: { externalIds: { externalIds: "externalIds" }, id: "id" },
                            label: "label",
                            mediaList: [
                                {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                                {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                            ],
                            mediaValue: {
                                mediaList: [
                                    {
                                        id: "id",
                                        processingStatus: "unknown",
                                        url: "url",
                                        urlExpiresAt: "2024-01-15T09:30:00Z",
                                    },
                                    {
                                        id: "id",
                                        processingStatus: "unknown",
                                        url: "url",
                                        urlExpiresAt: "2024-01-15T09:30:00Z",
                                    },
                                ],
                            },
                            multipleChoiceValue: { value: "value", valueId: "valueId" },
                            note: "note",
                            numberValue: { value: 1.1 },
                            personValue: {
                                person: {
                                    entryType: "tracked",
                                    name: "name",
                                    polymorphicUserId: { id: "id", type: "driver" },
                                },
                            },
                            signatureValue: {
                                media: {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                            },
                            tableValue: {
                                columns: [
                                    { id: "id", label: "label", type: "text" },
                                    { id: "id", label: "label", type: "text" },
                                ],
                                rows: [
                                    { cells: [], id: "id" },
                                    { cells: [], id: "id" },
                                ],
                            },
                            textValue: { value: "value" },
                            type: "number",
                        },
                        {
                            assetValue: {
                                asset: {
                                    entryType: "tracked",
                                    externalIds: { externalIds: "externalIds" },
                                    id: "id",
                                    name: "name",
                                },
                            },
                            checkBoxesValue: { value: ["value", "value"], valueIds: ["valueIds", "valueIds"] },
                            dateTimeValue: { type: "datetime", value: "2024-01-15T09:30:00Z" },
                            geofenceValue: {
                                geofence: {
                                    address: "address",
                                    entryType: "tracked",
                                    externalIds: { externalIds: "externalIds" },
                                    id: "id",
                                    name: "name",
                                },
                            },
                            id: "id",
                            issue: { externalIds: { externalIds: "externalIds" }, id: "id" },
                            label: "label",
                            mediaList: [
                                {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                                {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                            ],
                            mediaValue: {
                                mediaList: [
                                    {
                                        id: "id",
                                        processingStatus: "unknown",
                                        url: "url",
                                        urlExpiresAt: "2024-01-15T09:30:00Z",
                                    },
                                    {
                                        id: "id",
                                        processingStatus: "unknown",
                                        url: "url",
                                        urlExpiresAt: "2024-01-15T09:30:00Z",
                                    },
                                ],
                            },
                            multipleChoiceValue: { value: "value", valueId: "valueId" },
                            note: "note",
                            numberValue: { value: 1.1 },
                            personValue: {
                                person: {
                                    entryType: "tracked",
                                    name: "name",
                                    polymorphicUserId: { id: "id", type: "driver" },
                                },
                            },
                            signatureValue: {
                                media: {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                            },
                            tableValue: {
                                columns: [
                                    { id: "id", label: "label", type: "text" },
                                    { id: "id", label: "label", type: "text" },
                                ],
                                rows: [
                                    { cells: [], id: "id" },
                                    { cells: [], id: "id" },
                                ],
                            },
                            textValue: { value: "value" },
                            type: "number",
                        },
                    ],
                    formTemplate: { id: "id", revisionId: "revisionId" },
                    geofence: {
                        address: "address",
                        entryType: "tracked",
                        externalIds: { externalIds: "externalIds" },
                        id: "id",
                        name: "name",
                    },
                    id: "id",
                    isRequired: true,
                    location: { latitude: 1.1, longitude: 1.1 },
                    routeId: "routeId",
                    routeStopId: "routeStopId",
                    score: { maxPoints: 1.1, scorePercent: 1.1, scorePoints: 1.1 },
                    status: "notStarted",
                    submittedAtTime: "2024-01-15T09:30:00Z",
                    submittedBy: { id: "id", type: "driver" },
                    title: "title",
                    updatedAtTime: "2024-01-15T09:30:00Z",
                },
                {
                    approvalDetails: { comment: "comment" },
                    asset: {
                        entryType: "tracked",
                        externalIds: { externalIds: "externalIds" },
                        id: "id",
                        name: "name",
                    },
                    assignedAtTime: "2024-01-15T09:30:00Z",
                    assignedTo: { id: "id", type: "driver" },
                    createdAtTime: "2024-01-15T09:30:00Z",
                    dueAtTime: "2024-01-15T09:30:00Z",
                    externalIds: { externalIds: "externalIds" },
                    fields: [
                        {
                            assetValue: {
                                asset: {
                                    entryType: "tracked",
                                    externalIds: { externalIds: "externalIds" },
                                    id: "id",
                                    name: "name",
                                },
                            },
                            checkBoxesValue: { value: ["value", "value"], valueIds: ["valueIds", "valueIds"] },
                            dateTimeValue: { type: "datetime", value: "2024-01-15T09:30:00Z" },
                            geofenceValue: {
                                geofence: {
                                    address: "address",
                                    entryType: "tracked",
                                    externalIds: { externalIds: "externalIds" },
                                    id: "id",
                                    name: "name",
                                },
                            },
                            id: "id",
                            issue: { externalIds: { externalIds: "externalIds" }, id: "id" },
                            label: "label",
                            mediaList: [
                                {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                                {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                            ],
                            mediaValue: {
                                mediaList: [
                                    {
                                        id: "id",
                                        processingStatus: "unknown",
                                        url: "url",
                                        urlExpiresAt: "2024-01-15T09:30:00Z",
                                    },
                                    {
                                        id: "id",
                                        processingStatus: "unknown",
                                        url: "url",
                                        urlExpiresAt: "2024-01-15T09:30:00Z",
                                    },
                                ],
                            },
                            multipleChoiceValue: { value: "value", valueId: "valueId" },
                            note: "note",
                            numberValue: { value: 1.1 },
                            personValue: {
                                person: {
                                    entryType: "tracked",
                                    name: "name",
                                    polymorphicUserId: { id: "id", type: "driver" },
                                },
                            },
                            signatureValue: {
                                media: {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                            },
                            tableValue: {
                                columns: [
                                    { id: "id", label: "label", type: "text" },
                                    { id: "id", label: "label", type: "text" },
                                ],
                                rows: [
                                    { cells: [], id: "id" },
                                    { cells: [], id: "id" },
                                ],
                            },
                            textValue: { value: "value" },
                            type: "number",
                        },
                        {
                            assetValue: {
                                asset: {
                                    entryType: "tracked",
                                    externalIds: { externalIds: "externalIds" },
                                    id: "id",
                                    name: "name",
                                },
                            },
                            checkBoxesValue: { value: ["value", "value"], valueIds: ["valueIds", "valueIds"] },
                            dateTimeValue: { type: "datetime", value: "2024-01-15T09:30:00Z" },
                            geofenceValue: {
                                geofence: {
                                    address: "address",
                                    entryType: "tracked",
                                    externalIds: { externalIds: "externalIds" },
                                    id: "id",
                                    name: "name",
                                },
                            },
                            id: "id",
                            issue: { externalIds: { externalIds: "externalIds" }, id: "id" },
                            label: "label",
                            mediaList: [
                                {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                                {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                            ],
                            mediaValue: {
                                mediaList: [
                                    {
                                        id: "id",
                                        processingStatus: "unknown",
                                        url: "url",
                                        urlExpiresAt: "2024-01-15T09:30:00Z",
                                    },
                                    {
                                        id: "id",
                                        processingStatus: "unknown",
                                        url: "url",
                                        urlExpiresAt: "2024-01-15T09:30:00Z",
                                    },
                                ],
                            },
                            multipleChoiceValue: { value: "value", valueId: "valueId" },
                            note: "note",
                            numberValue: { value: 1.1 },
                            personValue: {
                                person: {
                                    entryType: "tracked",
                                    name: "name",
                                    polymorphicUserId: { id: "id", type: "driver" },
                                },
                            },
                            signatureValue: {
                                media: {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                            },
                            tableValue: {
                                columns: [
                                    { id: "id", label: "label", type: "text" },
                                    { id: "id", label: "label", type: "text" },
                                ],
                                rows: [
                                    { cells: [], id: "id" },
                                    { cells: [], id: "id" },
                                ],
                            },
                            textValue: { value: "value" },
                            type: "number",
                        },
                    ],
                    formTemplate: { id: "id", revisionId: "revisionId" },
                    geofence: {
                        address: "address",
                        entryType: "tracked",
                        externalIds: { externalIds: "externalIds" },
                        id: "id",
                        name: "name",
                    },
                    id: "id",
                    isRequired: true,
                    location: { latitude: 1.1, longitude: 1.1 },
                    routeId: "routeId",
                    routeStopId: "routeStopId",
                    score: { maxPoints: 1.1, scorePercent: 1.1, scorePoints: 1.1 },
                    status: "notStarted",
                    submittedAtTime: "2024-01-15T09:30:00Z",
                    submittedBy: { id: "id", type: "driver" },
                    title: "title",
                    updatedAtTime: "2024-01-15T09:30:00Z",
                },
            ],
        };
        server.mockEndpoint().get("/form-submissions").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.formSubmissions.list();
        expect(response).toEqual({
            data: [
                {
                    approvalDetails: {
                        comment: "comment",
                    },
                    asset: {
                        entryType: "tracked",
                        externalIds: {
                            externalIds: "externalIds",
                        },
                        id: "id",
                        name: "name",
                    },
                    assignedAtTime: "2024-01-15T09:30:00Z",
                    assignedTo: {
                        id: "id",
                        type: "driver",
                    },
                    createdAtTime: "2024-01-15T09:30:00Z",
                    dueAtTime: "2024-01-15T09:30:00Z",
                    externalIds: {
                        externalIds: "externalIds",
                    },
                    fields: [
                        {
                            assetValue: {
                                asset: {
                                    entryType: "tracked",
                                    externalIds: {
                                        externalIds: "externalIds",
                                    },
                                    id: "id",
                                    name: "name",
                                },
                            },
                            checkBoxesValue: {
                                value: ["value", "value"],
                                valueIds: ["valueIds", "valueIds"],
                            },
                            dateTimeValue: {
                                type: "datetime",
                                value: "2024-01-15T09:30:00Z",
                            },
                            geofenceValue: {
                                geofence: {
                                    address: "address",
                                    entryType: "tracked",
                                    externalIds: {
                                        externalIds: "externalIds",
                                    },
                                    id: "id",
                                    name: "name",
                                },
                            },
                            id: "id",
                            issue: {
                                externalIds: {
                                    externalIds: "externalIds",
                                },
                                id: "id",
                            },
                            label: "label",
                            mediaList: [
                                {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                                {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                            ],
                            mediaValue: {
                                mediaList: [
                                    {
                                        id: "id",
                                        processingStatus: "unknown",
                                        url: "url",
                                        urlExpiresAt: "2024-01-15T09:30:00Z",
                                    },
                                    {
                                        id: "id",
                                        processingStatus: "unknown",
                                        url: "url",
                                        urlExpiresAt: "2024-01-15T09:30:00Z",
                                    },
                                ],
                            },
                            multipleChoiceValue: {
                                value: "value",
                                valueId: "valueId",
                            },
                            note: "note",
                            numberValue: {
                                value: 1.1,
                            },
                            personValue: {
                                person: {
                                    entryType: "tracked",
                                    name: "name",
                                    polymorphicUserId: {
                                        id: "id",
                                        type: "driver",
                                    },
                                },
                            },
                            signatureValue: {
                                media: {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                            },
                            tableValue: {
                                columns: [
                                    {
                                        id: "id",
                                        label: "label",
                                        type: "text",
                                    },
                                    {
                                        id: "id",
                                        label: "label",
                                        type: "text",
                                    },
                                ],
                                rows: [
                                    {
                                        cells: [],
                                        id: "id",
                                    },
                                    {
                                        cells: [],
                                        id: "id",
                                    },
                                ],
                            },
                            textValue: {
                                value: "value",
                            },
                            type: "number",
                        },
                        {
                            assetValue: {
                                asset: {
                                    entryType: "tracked",
                                    externalIds: {
                                        externalIds: "externalIds",
                                    },
                                    id: "id",
                                    name: "name",
                                },
                            },
                            checkBoxesValue: {
                                value: ["value", "value"],
                                valueIds: ["valueIds", "valueIds"],
                            },
                            dateTimeValue: {
                                type: "datetime",
                                value: "2024-01-15T09:30:00Z",
                            },
                            geofenceValue: {
                                geofence: {
                                    address: "address",
                                    entryType: "tracked",
                                    externalIds: {
                                        externalIds: "externalIds",
                                    },
                                    id: "id",
                                    name: "name",
                                },
                            },
                            id: "id",
                            issue: {
                                externalIds: {
                                    externalIds: "externalIds",
                                },
                                id: "id",
                            },
                            label: "label",
                            mediaList: [
                                {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                                {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                            ],
                            mediaValue: {
                                mediaList: [
                                    {
                                        id: "id",
                                        processingStatus: "unknown",
                                        url: "url",
                                        urlExpiresAt: "2024-01-15T09:30:00Z",
                                    },
                                    {
                                        id: "id",
                                        processingStatus: "unknown",
                                        url: "url",
                                        urlExpiresAt: "2024-01-15T09:30:00Z",
                                    },
                                ],
                            },
                            multipleChoiceValue: {
                                value: "value",
                                valueId: "valueId",
                            },
                            note: "note",
                            numberValue: {
                                value: 1.1,
                            },
                            personValue: {
                                person: {
                                    entryType: "tracked",
                                    name: "name",
                                    polymorphicUserId: {
                                        id: "id",
                                        type: "driver",
                                    },
                                },
                            },
                            signatureValue: {
                                media: {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                            },
                            tableValue: {
                                columns: [
                                    {
                                        id: "id",
                                        label: "label",
                                        type: "text",
                                    },
                                    {
                                        id: "id",
                                        label: "label",
                                        type: "text",
                                    },
                                ],
                                rows: [
                                    {
                                        cells: [],
                                        id: "id",
                                    },
                                    {
                                        cells: [],
                                        id: "id",
                                    },
                                ],
                            },
                            textValue: {
                                value: "value",
                            },
                            type: "number",
                        },
                    ],
                    formTemplate: {
                        id: "id",
                        revisionId: "revisionId",
                    },
                    geofence: {
                        address: "address",
                        entryType: "tracked",
                        externalIds: {
                            externalIds: "externalIds",
                        },
                        id: "id",
                        name: "name",
                    },
                    id: "id",
                    isRequired: true,
                    location: {
                        latitude: 1.1,
                        longitude: 1.1,
                    },
                    routeId: "routeId",
                    routeStopId: "routeStopId",
                    score: {
                        maxPoints: 1.1,
                        scorePercent: 1.1,
                        scorePoints: 1.1,
                    },
                    status: "notStarted",
                    submittedAtTime: "2024-01-15T09:30:00Z",
                    submittedBy: {
                        id: "id",
                        type: "driver",
                    },
                    title: "title",
                    updatedAtTime: "2024-01-15T09:30:00Z",
                },
                {
                    approvalDetails: {
                        comment: "comment",
                    },
                    asset: {
                        entryType: "tracked",
                        externalIds: {
                            externalIds: "externalIds",
                        },
                        id: "id",
                        name: "name",
                    },
                    assignedAtTime: "2024-01-15T09:30:00Z",
                    assignedTo: {
                        id: "id",
                        type: "driver",
                    },
                    createdAtTime: "2024-01-15T09:30:00Z",
                    dueAtTime: "2024-01-15T09:30:00Z",
                    externalIds: {
                        externalIds: "externalIds",
                    },
                    fields: [
                        {
                            assetValue: {
                                asset: {
                                    entryType: "tracked",
                                    externalIds: {
                                        externalIds: "externalIds",
                                    },
                                    id: "id",
                                    name: "name",
                                },
                            },
                            checkBoxesValue: {
                                value: ["value", "value"],
                                valueIds: ["valueIds", "valueIds"],
                            },
                            dateTimeValue: {
                                type: "datetime",
                                value: "2024-01-15T09:30:00Z",
                            },
                            geofenceValue: {
                                geofence: {
                                    address: "address",
                                    entryType: "tracked",
                                    externalIds: {
                                        externalIds: "externalIds",
                                    },
                                    id: "id",
                                    name: "name",
                                },
                            },
                            id: "id",
                            issue: {
                                externalIds: {
                                    externalIds: "externalIds",
                                },
                                id: "id",
                            },
                            label: "label",
                            mediaList: [
                                {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                                {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                            ],
                            mediaValue: {
                                mediaList: [
                                    {
                                        id: "id",
                                        processingStatus: "unknown",
                                        url: "url",
                                        urlExpiresAt: "2024-01-15T09:30:00Z",
                                    },
                                    {
                                        id: "id",
                                        processingStatus: "unknown",
                                        url: "url",
                                        urlExpiresAt: "2024-01-15T09:30:00Z",
                                    },
                                ],
                            },
                            multipleChoiceValue: {
                                value: "value",
                                valueId: "valueId",
                            },
                            note: "note",
                            numberValue: {
                                value: 1.1,
                            },
                            personValue: {
                                person: {
                                    entryType: "tracked",
                                    name: "name",
                                    polymorphicUserId: {
                                        id: "id",
                                        type: "driver",
                                    },
                                },
                            },
                            signatureValue: {
                                media: {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                            },
                            tableValue: {
                                columns: [
                                    {
                                        id: "id",
                                        label: "label",
                                        type: "text",
                                    },
                                    {
                                        id: "id",
                                        label: "label",
                                        type: "text",
                                    },
                                ],
                                rows: [
                                    {
                                        cells: [],
                                        id: "id",
                                    },
                                    {
                                        cells: [],
                                        id: "id",
                                    },
                                ],
                            },
                            textValue: {
                                value: "value",
                            },
                            type: "number",
                        },
                        {
                            assetValue: {
                                asset: {
                                    entryType: "tracked",
                                    externalIds: {
                                        externalIds: "externalIds",
                                    },
                                    id: "id",
                                    name: "name",
                                },
                            },
                            checkBoxesValue: {
                                value: ["value", "value"],
                                valueIds: ["valueIds", "valueIds"],
                            },
                            dateTimeValue: {
                                type: "datetime",
                                value: "2024-01-15T09:30:00Z",
                            },
                            geofenceValue: {
                                geofence: {
                                    address: "address",
                                    entryType: "tracked",
                                    externalIds: {
                                        externalIds: "externalIds",
                                    },
                                    id: "id",
                                    name: "name",
                                },
                            },
                            id: "id",
                            issue: {
                                externalIds: {
                                    externalIds: "externalIds",
                                },
                                id: "id",
                            },
                            label: "label",
                            mediaList: [
                                {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                                {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                            ],
                            mediaValue: {
                                mediaList: [
                                    {
                                        id: "id",
                                        processingStatus: "unknown",
                                        url: "url",
                                        urlExpiresAt: "2024-01-15T09:30:00Z",
                                    },
                                    {
                                        id: "id",
                                        processingStatus: "unknown",
                                        url: "url",
                                        urlExpiresAt: "2024-01-15T09:30:00Z",
                                    },
                                ],
                            },
                            multipleChoiceValue: {
                                value: "value",
                                valueId: "valueId",
                            },
                            note: "note",
                            numberValue: {
                                value: 1.1,
                            },
                            personValue: {
                                person: {
                                    entryType: "tracked",
                                    name: "name",
                                    polymorphicUserId: {
                                        id: "id",
                                        type: "driver",
                                    },
                                },
                            },
                            signatureValue: {
                                media: {
                                    id: "id",
                                    processingStatus: "unknown",
                                    url: "url",
                                    urlExpiresAt: "2024-01-15T09:30:00Z",
                                },
                            },
                            tableValue: {
                                columns: [
                                    {
                                        id: "id",
                                        label: "label",
                                        type: "text",
                                    },
                                    {
                                        id: "id",
                                        label: "label",
                                        type: "text",
                                    },
                                ],
                                rows: [
                                    {
                                        cells: [],
                                        id: "id",
                                    },
                                    {
                                        cells: [],
                                        id: "id",
                                    },
                                ],
                            },
                            textValue: {
                                value: "value",
                            },
                            type: "number",
                        },
                    ],
                    formTemplate: {
                        id: "id",
                        revisionId: "revisionId",
                    },
                    geofence: {
                        address: "address",
                        entryType: "tracked",
                        externalIds: {
                            externalIds: "externalIds",
                        },
                        id: "id",
                        name: "name",
                    },
                    id: "id",
                    isRequired: true,
                    location: {
                        latitude: 1.1,
                        longitude: 1.1,
                    },
                    routeId: "routeId",
                    routeStopId: "routeStopId",
                    score: {
                        maxPoints: 1.1,
                        scorePercent: 1.1,
                        scorePoints: 1.1,
                    },
                    status: "notStarted",
                    submittedAtTime: "2024-01-15T09:30:00Z",
                    submittedBy: {
                        id: "id",
                        type: "driver",
                    },
                    title: "title",
                    updatedAtTime: "2024-01-15T09:30:00Z",
                },
            ],
        });
    });

    test("create", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraApiClient({ token: "test", version: "2025-05-12", environment: server.baseUrl });
        const rawRequestBody = {
            formTemplate: {
                id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                revisionId: "1214a1fa-f0c6-408b-bf85-51dc3bc71ac7",
            },
            status: "notStarted",
        };
        const rawResponseBody = {
            data: {
                approvalDetails: { comment: "Requesting some changes to the submission." },
                asset: {
                    entryType: "tracked",
                    externalIds: { key: "value" },
                    id: "281474982859091",
                    name: "trailer 123",
                },
                assignedAtTime: "2019-06-13T19:08:25Z",
                assignedTo: { id: "938172", type: "driver" },
                createdAtTime: "2019-06-13T19:08:25Z",
                dueAtTime: "2019-06-13T19:08:25Z",
                externalIds: { key: "value" },
                fields: [
                    {
                        checkBoxesValue: {
                            value: ["Option A", "Option B"],
                            valueIds: ["0cbbddb3-2541-4889-b4eb-92171cbfc142", "d33198cb-369f-4278-8120-d92d3ebf74bf"],
                        },
                        dateTimeValue: { type: "datetime", value: "2024-08-08T18:53:23Z" },
                        id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                        issue: { id: "12345" },
                        label: "Engine Hours",
                        mediaList: [
                            {
                                id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                                processingStatus: "unknown",
                                url: "https://samsara-forms-submission-media-uploads.s3.us-west-2.amazonaws.com/123456",
                                urlExpiresAt: "2019-06-13T19:08:25Z",
                            },
                        ],
                        mediaValue: {
                            mediaList: [
                                {
                                    id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                                    processingStatus: "unknown",
                                    url: "https://samsara-forms-submission-media-uploads.s3.us-west-2.amazonaws.com/123456",
                                    urlExpiresAt: "2019-06-13T19:08:25Z",
                                },
                            ],
                        },
                        multipleChoiceValue: { value: "Yes", valueId: "94096370-7228-4d83-ae5d-b20f3e45c0fc" },
                        note: "Fire and oil can lead to an accident.",
                        numberValue: { value: 123.456 },
                        signatureValue: {
                            media: {
                                id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                                processingStatus: "unknown",
                                url: "https://samsara-forms-submission-media-uploads.s3.us-west-2.amazonaws.com/123456",
                                urlExpiresAt: "2019-06-13T19:08:25Z",
                            },
                        },
                        tableValue: {
                            columns: [{ id: "id", label: "Store Number", type: "text" }],
                            rows: [
                                {
                                    cells: [
                                        {
                                            checkBoxesValue: {
                                                value: ["Option A", "Option B"],
                                                valueIds: [
                                                    "0cbbddb3-2541-4889-b4eb-92171cbfc142",
                                                    "d33198cb-369f-4278-8120-d92d3ebf74bf",
                                                ],
                                            },
                                            dateTimeValue: { type: "datetime", value: "2024-08-08T18:53:23Z" },
                                            id: "id",
                                            mediaValue: {
                                                mediaList: [
                                                    {
                                                        id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                                                        processingStatus: "unknown",
                                                        url: "https://samsara-forms-submission-media-uploads.s3.us-west-2.amazonaws.com/123456",
                                                        urlExpiresAt: "2019-06-13T19:08:25Z",
                                                    },
                                                ],
                                            },
                                            multipleChoiceValue: {
                                                value: "Yes",
                                                valueId: "94096370-7228-4d83-ae5d-b20f3e45c0fc",
                                            },
                                            numberValue: { value: 123.456 },
                                            signatureValue: {
                                                media: {
                                                    id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                                                    processingStatus: "unknown",
                                                    url: "https://samsara-forms-submission-media-uploads.s3.us-west-2.amazonaws.com/123456",
                                                    urlExpiresAt: "2019-06-13T19:08:25Z",
                                                },
                                            },
                                            textValue: { value: "Exposed wires" },
                                            type: "number",
                                        },
                                    ],
                                    id: "id",
                                },
                            ],
                        },
                        textValue: { value: "Exposed wires" },
                        type: "number",
                    },
                ],
                formTemplate: {
                    id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                    revisionId: "1214a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                },
                geofence: {
                    address: "123 Main St, Anytown, USA 12345",
                    entryType: "tracked",
                    externalIds: { key: "value" },
                    id: "1234567890",
                    name: "Geofence Name",
                },
                id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                isRequired: true,
                location: { latitude: 12333122.3, longitude: 1233331.4 },
                routeId: "123456789",
                routeStopId: "987654321",
                score: { maxPoints: 80, scorePercent: 75, scorePoints: 60 },
                status: "notStarted",
                submittedAtTime: "2019-06-13T19:08:25Z",
                submittedBy: { id: "938172", type: "driver" },
                title: "Form Submission Title",
                updatedAtTime: "2019-06-13T19:08:25Z",
            },
        };
        server
            .mockEndpoint()
            .post("/form-submissions")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.formSubmissions.create({
            formTemplate: {
                id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                revisionId: "1214a1fa-f0c6-408b-bf85-51dc3bc71ac7",
            },
        });
        expect(response).toEqual({
            data: {
                approvalDetails: {
                    comment: "Requesting some changes to the submission.",
                },
                asset: {
                    entryType: "tracked",
                    externalIds: {
                        key: "value",
                    },
                    id: "281474982859091",
                    name: "trailer 123",
                },
                assignedAtTime: "2019-06-13T19:08:25Z",
                assignedTo: {
                    id: "938172",
                    type: "driver",
                },
                createdAtTime: "2019-06-13T19:08:25Z",
                dueAtTime: "2019-06-13T19:08:25Z",
                externalIds: {
                    key: "value",
                },
                fields: [
                    {
                        checkBoxesValue: {
                            value: ["Option A", "Option B"],
                            valueIds: ["0cbbddb3-2541-4889-b4eb-92171cbfc142", "d33198cb-369f-4278-8120-d92d3ebf74bf"],
                        },
                        dateTimeValue: {
                            type: "datetime",
                            value: "2024-08-08T18:53:23Z",
                        },
                        id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                        issue: {
                            id: "12345",
                        },
                        label: "Engine Hours",
                        mediaList: [
                            {
                                id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                                processingStatus: "unknown",
                                url: "https://samsara-forms-submission-media-uploads.s3.us-west-2.amazonaws.com/123456",
                                urlExpiresAt: "2019-06-13T19:08:25Z",
                            },
                        ],
                        mediaValue: {
                            mediaList: [
                                {
                                    id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                                    processingStatus: "unknown",
                                    url: "https://samsara-forms-submission-media-uploads.s3.us-west-2.amazonaws.com/123456",
                                    urlExpiresAt: "2019-06-13T19:08:25Z",
                                },
                            ],
                        },
                        multipleChoiceValue: {
                            value: "Yes",
                            valueId: "94096370-7228-4d83-ae5d-b20f3e45c0fc",
                        },
                        note: "Fire and oil can lead to an accident.",
                        numberValue: {
                            value: 123.456,
                        },
                        signatureValue: {
                            media: {
                                id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                                processingStatus: "unknown",
                                url: "https://samsara-forms-submission-media-uploads.s3.us-west-2.amazonaws.com/123456",
                                urlExpiresAt: "2019-06-13T19:08:25Z",
                            },
                        },
                        tableValue: {
                            columns: [
                                {
                                    id: "id",
                                    label: "Store Number",
                                    type: "text",
                                },
                            ],
                            rows: [
                                {
                                    cells: [
                                        {
                                            checkBoxesValue: {
                                                value: ["Option A", "Option B"],
                                                valueIds: [
                                                    "0cbbddb3-2541-4889-b4eb-92171cbfc142",
                                                    "d33198cb-369f-4278-8120-d92d3ebf74bf",
                                                ],
                                            },
                                            dateTimeValue: {
                                                type: "datetime",
                                                value: "2024-08-08T18:53:23Z",
                                            },
                                            id: "id",
                                            mediaValue: {
                                                mediaList: [
                                                    {
                                                        id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                                                        processingStatus: "unknown",
                                                        url: "https://samsara-forms-submission-media-uploads.s3.us-west-2.amazonaws.com/123456",
                                                        urlExpiresAt: "2019-06-13T19:08:25Z",
                                                    },
                                                ],
                                            },
                                            multipleChoiceValue: {
                                                value: "Yes",
                                                valueId: "94096370-7228-4d83-ae5d-b20f3e45c0fc",
                                            },
                                            numberValue: {
                                                value: 123.456,
                                            },
                                            signatureValue: {
                                                media: {
                                                    id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                                                    processingStatus: "unknown",
                                                    url: "https://samsara-forms-submission-media-uploads.s3.us-west-2.amazonaws.com/123456",
                                                    urlExpiresAt: "2019-06-13T19:08:25Z",
                                                },
                                            },
                                            textValue: {
                                                value: "Exposed wires",
                                            },
                                            type: "number",
                                        },
                                    ],
                                    id: "id",
                                },
                            ],
                        },
                        textValue: {
                            value: "Exposed wires",
                        },
                        type: "number",
                    },
                ],
                formTemplate: {
                    id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                    revisionId: "1214a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                },
                geofence: {
                    address: "123 Main St, Anytown, USA 12345",
                    entryType: "tracked",
                    externalIds: {
                        key: "value",
                    },
                    id: "1234567890",
                    name: "Geofence Name",
                },
                id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                isRequired: true,
                location: {
                    latitude: 12333122.3,
                    longitude: 1233331.4,
                },
                routeId: "123456789",
                routeStopId: "987654321",
                score: {
                    maxPoints: 80,
                    scorePercent: 75,
                    scorePoints: 60,
                },
                status: "notStarted",
                submittedAtTime: "2019-06-13T19:08:25Z",
                submittedBy: {
                    id: "938172",
                    type: "driver",
                },
                title: "Form Submission Title",
                updatedAtTime: "2019-06-13T19:08:25Z",
            },
        });
    });

    test("update", async () => {
        const server = mockServerPool.createServer();
        const client = new SamsaraApiClient({ token: "test", version: "2025-05-12", environment: server.baseUrl });
        const rawRequestBody = { id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac8", status: "notStarted" };
        const rawResponseBody = {
            data: {
                approvalDetails: { comment: "Requesting some changes to the submission." },
                asset: {
                    entryType: "tracked",
                    externalIds: { key: "value" },
                    id: "281474982859091",
                    name: "trailer 123",
                },
                assignedAtTime: "2019-06-13T19:08:25Z",
                assignedTo: { id: "938172", type: "driver" },
                createdAtTime: "2019-06-13T19:08:25Z",
                dueAtTime: "2019-06-13T19:08:25Z",
                externalIds: { key: "value" },
                fields: [
                    {
                        checkBoxesValue: {
                            value: ["Option A", "Option B"],
                            valueIds: ["0cbbddb3-2541-4889-b4eb-92171cbfc142", "d33198cb-369f-4278-8120-d92d3ebf74bf"],
                        },
                        dateTimeValue: { type: "datetime", value: "2024-08-08T18:53:23Z" },
                        id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                        issue: { id: "12345" },
                        label: "Engine Hours",
                        mediaList: [
                            {
                                id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                                processingStatus: "unknown",
                                url: "https://samsara-forms-submission-media-uploads.s3.us-west-2.amazonaws.com/123456",
                                urlExpiresAt: "2019-06-13T19:08:25Z",
                            },
                        ],
                        mediaValue: {
                            mediaList: [
                                {
                                    id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                                    processingStatus: "unknown",
                                    url: "https://samsara-forms-submission-media-uploads.s3.us-west-2.amazonaws.com/123456",
                                    urlExpiresAt: "2019-06-13T19:08:25Z",
                                },
                            ],
                        },
                        multipleChoiceValue: { value: "Yes", valueId: "94096370-7228-4d83-ae5d-b20f3e45c0fc" },
                        note: "Fire and oil can lead to an accident.",
                        numberValue: { value: 123.456 },
                        signatureValue: {
                            media: {
                                id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                                processingStatus: "unknown",
                                url: "https://samsara-forms-submission-media-uploads.s3.us-west-2.amazonaws.com/123456",
                                urlExpiresAt: "2019-06-13T19:08:25Z",
                            },
                        },
                        tableValue: {
                            columns: [{ id: "id", label: "Store Number", type: "text" }],
                            rows: [
                                {
                                    cells: [
                                        {
                                            checkBoxesValue: {
                                                value: ["Option A", "Option B"],
                                                valueIds: [
                                                    "0cbbddb3-2541-4889-b4eb-92171cbfc142",
                                                    "d33198cb-369f-4278-8120-d92d3ebf74bf",
                                                ],
                                            },
                                            dateTimeValue: { type: "datetime", value: "2024-08-08T18:53:23Z" },
                                            id: "id",
                                            mediaValue: {
                                                mediaList: [
                                                    {
                                                        id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                                                        processingStatus: "unknown",
                                                        url: "https://samsara-forms-submission-media-uploads.s3.us-west-2.amazonaws.com/123456",
                                                        urlExpiresAt: "2019-06-13T19:08:25Z",
                                                    },
                                                ],
                                            },
                                            multipleChoiceValue: {
                                                value: "Yes",
                                                valueId: "94096370-7228-4d83-ae5d-b20f3e45c0fc",
                                            },
                                            numberValue: { value: 123.456 },
                                            signatureValue: {
                                                media: {
                                                    id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                                                    processingStatus: "unknown",
                                                    url: "https://samsara-forms-submission-media-uploads.s3.us-west-2.amazonaws.com/123456",
                                                    urlExpiresAt: "2019-06-13T19:08:25Z",
                                                },
                                            },
                                            textValue: { value: "Exposed wires" },
                                            type: "number",
                                        },
                                    ],
                                    id: "id",
                                },
                            ],
                        },
                        textValue: { value: "Exposed wires" },
                        type: "number",
                    },
                ],
                formTemplate: {
                    id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                    revisionId: "1214a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                },
                geofence: {
                    address: "123 Main St, Anytown, USA 12345",
                    entryType: "tracked",
                    externalIds: { key: "value" },
                    id: "1234567890",
                    name: "Geofence Name",
                },
                id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                isRequired: true,
                location: { latitude: 12333122.3, longitude: 1233331.4 },
                routeId: "123456789",
                routeStopId: "987654321",
                score: { maxPoints: 80, scorePercent: 75, scorePoints: 60 },
                status: "notStarted",
                submittedAtTime: "2019-06-13T19:08:25Z",
                submittedBy: { id: "938172", type: "driver" },
                title: "Form Submission Title",
                updatedAtTime: "2019-06-13T19:08:25Z",
            },
        };
        server
            .mockEndpoint()
            .patch("/form-submissions")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.formSubmissions.update({
            id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac8",
            status: "notStarted",
        });
        expect(response).toEqual({
            data: {
                approvalDetails: {
                    comment: "Requesting some changes to the submission.",
                },
                asset: {
                    entryType: "tracked",
                    externalIds: {
                        key: "value",
                    },
                    id: "281474982859091",
                    name: "trailer 123",
                },
                assignedAtTime: "2019-06-13T19:08:25Z",
                assignedTo: {
                    id: "938172",
                    type: "driver",
                },
                createdAtTime: "2019-06-13T19:08:25Z",
                dueAtTime: "2019-06-13T19:08:25Z",
                externalIds: {
                    key: "value",
                },
                fields: [
                    {
                        checkBoxesValue: {
                            value: ["Option A", "Option B"],
                            valueIds: ["0cbbddb3-2541-4889-b4eb-92171cbfc142", "d33198cb-369f-4278-8120-d92d3ebf74bf"],
                        },
                        dateTimeValue: {
                            type: "datetime",
                            value: "2024-08-08T18:53:23Z",
                        },
                        id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                        issue: {
                            id: "12345",
                        },
                        label: "Engine Hours",
                        mediaList: [
                            {
                                id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                                processingStatus: "unknown",
                                url: "https://samsara-forms-submission-media-uploads.s3.us-west-2.amazonaws.com/123456",
                                urlExpiresAt: "2019-06-13T19:08:25Z",
                            },
                        ],
                        mediaValue: {
                            mediaList: [
                                {
                                    id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                                    processingStatus: "unknown",
                                    url: "https://samsara-forms-submission-media-uploads.s3.us-west-2.amazonaws.com/123456",
                                    urlExpiresAt: "2019-06-13T19:08:25Z",
                                },
                            ],
                        },
                        multipleChoiceValue: {
                            value: "Yes",
                            valueId: "94096370-7228-4d83-ae5d-b20f3e45c0fc",
                        },
                        note: "Fire and oil can lead to an accident.",
                        numberValue: {
                            value: 123.456,
                        },
                        signatureValue: {
                            media: {
                                id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                                processingStatus: "unknown",
                                url: "https://samsara-forms-submission-media-uploads.s3.us-west-2.amazonaws.com/123456",
                                urlExpiresAt: "2019-06-13T19:08:25Z",
                            },
                        },
                        tableValue: {
                            columns: [
                                {
                                    id: "id",
                                    label: "Store Number",
                                    type: "text",
                                },
                            ],
                            rows: [
                                {
                                    cells: [
                                        {
                                            checkBoxesValue: {
                                                value: ["Option A", "Option B"],
                                                valueIds: [
                                                    "0cbbddb3-2541-4889-b4eb-92171cbfc142",
                                                    "d33198cb-369f-4278-8120-d92d3ebf74bf",
                                                ],
                                            },
                                            dateTimeValue: {
                                                type: "datetime",
                                                value: "2024-08-08T18:53:23Z",
                                            },
                                            id: "id",
                                            mediaValue: {
                                                mediaList: [
                                                    {
                                                        id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                                                        processingStatus: "unknown",
                                                        url: "https://samsara-forms-submission-media-uploads.s3.us-west-2.amazonaws.com/123456",
                                                        urlExpiresAt: "2019-06-13T19:08:25Z",
                                                    },
                                                ],
                                            },
                                            multipleChoiceValue: {
                                                value: "Yes",
                                                valueId: "94096370-7228-4d83-ae5d-b20f3e45c0fc",
                                            },
                                            numberValue: {
                                                value: 123.456,
                                            },
                                            signatureValue: {
                                                media: {
                                                    id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                                                    processingStatus: "unknown",
                                                    url: "https://samsara-forms-submission-media-uploads.s3.us-west-2.amazonaws.com/123456",
                                                    urlExpiresAt: "2019-06-13T19:08:25Z",
                                                },
                                            },
                                            textValue: {
                                                value: "Exposed wires",
                                            },
                                            type: "number",
                                        },
                                    ],
                                    id: "id",
                                },
                            ],
                        },
                        textValue: {
                            value: "Exposed wires",
                        },
                        type: "number",
                    },
                ],
                formTemplate: {
                    id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                    revisionId: "1214a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                },
                geofence: {
                    address: "123 Main St, Anytown, USA 12345",
                    entryType: "tracked",
                    externalIds: {
                        key: "value",
                    },
                    id: "1234567890",
                    name: "Geofence Name",
                },
                id: "9814a1fa-f0c6-408b-bf85-51dc3bc71ac7",
                isRequired: true,
                location: {
                    latitude: 12333122.3,
                    longitude: 1233331.4,
                },
                routeId: "123456789",
                routeStopId: "987654321",
                score: {
                    maxPoints: 80,
                    scorePercent: 75,
                    scorePoints: 60,
                },
                status: "notStarted",
                submittedAtTime: "2019-06-13T19:08:25Z",
                submittedBy: {
                    id: "938172",
                    type: "driver",
                },
                title: "Form Submission Title",
                updatedAtTime: "2019-06-13T19:08:25Z",
            },
        });
    });
});
